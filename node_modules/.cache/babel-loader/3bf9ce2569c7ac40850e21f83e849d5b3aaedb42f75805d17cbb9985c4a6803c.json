{"ast":null,"code":"import React,{createContext,useContext,useEffect,useMemo,useState}from\"react\";import{supabase}from\"../lib/supabaseClient.js\";import{useTranslation}from\"react-i18next\";import{mapLangToCurrency,mapLangToLocale}from\"../utils/currency\";import{jsx as _jsx}from\"react/jsx-runtime\";const Ctx=/*#__PURE__*/createContext(null);export const useCurrency=()=>useContext(Ctx);export function CurrencyProvider(_ref){let{children}=_ref;const{i18n}=useTranslation();const[fx,setFx]=useState([]);const[currency,setCurrency]=useState(mapLangToCurrency(i18n.language||\"en\"));const[locale,setLocale]=useState(mapLangToLocale(i18n.language||\"en\"));useEffect(()=>{(async()=>{const{data,error}=await supabase.from(\"fx_rates\").select(\"*\");if(!error)setFx(data||[]);})();},[]);useEffect(()=>{const lng=i18n.language||\"en\";setCurrency(mapLangToCurrency(lng));setLocale(mapLangToLocale(lng));},[i18n.language]);const value=useMemo(()=>({fx,currency,setCurrency,locale}),[fx,currency,locale]);return/*#__PURE__*/_jsx(Ctx.Provider,{value:value,children:children});}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useState","supabase","useTranslation","mapLangToCurrency","mapLangToLocale","jsx","_jsx","Ctx","useCurrency","CurrencyProvider","_ref","children","i18n","fx","setFx","currency","setCurrency","language","locale","setLocale","data","error","from","select","lng","value","Provider"],"sources":["C:/Projects/cidika-travel/src/context/CurrencyContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { supabase } from \"../lib/supabaseClient.js\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { mapLangToCurrency, mapLangToLocale } from \"../utils/currency\";\r\n\r\nconst Ctx = createContext(null);\r\nexport const useCurrency = () => useContext(Ctx);\r\n\r\nexport function CurrencyProvider({ children }) {\r\n  const { i18n } = useTranslation();\r\n  const [fx, setFx] = useState([]);\r\n  const [currency, setCurrency] = useState(mapLangToCurrency(i18n.language || \"en\"));\r\n  const [locale, setLocale] = useState(mapLangToLocale(i18n.language || \"en\"));\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { data, error } = await supabase.from(\"fx_rates\").select(\"*\");\r\n      if (!error) setFx(data || []);\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const lng = i18n.language || \"en\";\r\n    setCurrency(mapLangToCurrency(lng));\r\n    setLocale(mapLangToLocale(lng));\r\n  }, [i18n.language]);\r\n\r\n  const value = useMemo(() => ({ fx, currency, setCurrency, locale }), [fx, currency, locale]);\r\n\r\n  return <Ctx.Provider value={value}>{children}</Ctx.Provider>;\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CACtF,OAASC,QAAQ,KAAQ,0BAA0B,CACnD,OAASC,cAAc,KAAQ,eAAe,CAC9C,OAASC,iBAAiB,CAAEC,eAAe,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvE,KAAM,CAAAC,GAAG,cAAGX,aAAa,CAAC,IAAI,CAAC,CAC/B,MAAO,MAAM,CAAAY,WAAW,CAAGA,CAAA,GAAMX,UAAU,CAACU,GAAG,CAAC,CAEhD,MAAO,SAAS,CAAAE,gBAAgBA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC3C,KAAM,CAAEE,IAAK,CAAC,CAAGV,cAAc,CAAC,CAAC,CACjC,KAAM,CAACW,EAAE,CAAEC,KAAK,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAChC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAACG,iBAAiB,CAACS,IAAI,CAACK,QAAQ,EAAI,IAAI,CAAC,CAAC,CAClF,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGnB,QAAQ,CAACI,eAAe,CAACQ,IAAI,CAACK,QAAQ,EAAI,IAAI,CAAC,CAAC,CAE5EnB,SAAS,CAAC,IAAM,CACd,CAAC,SAAY,CACX,KAAM,CAAEsB,IAAI,CAAEC,KAAM,CAAC,CAAG,KAAM,CAAApB,QAAQ,CAACqB,IAAI,CAAC,UAAU,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC,CACnE,GAAI,CAACF,KAAK,CAAEP,KAAK,CAACM,IAAI,EAAI,EAAE,CAAC,CAC/B,CAAC,EAAE,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAENtB,SAAS,CAAC,IAAM,CACd,KAAM,CAAA0B,GAAG,CAAGZ,IAAI,CAACK,QAAQ,EAAI,IAAI,CACjCD,WAAW,CAACb,iBAAiB,CAACqB,GAAG,CAAC,CAAC,CACnCL,SAAS,CAACf,eAAe,CAACoB,GAAG,CAAC,CAAC,CACjC,CAAC,CAAE,CAACZ,IAAI,CAACK,QAAQ,CAAC,CAAC,CAEnB,KAAM,CAAAQ,KAAK,CAAG1B,OAAO,CAAC,KAAO,CAAEc,EAAE,CAAEE,QAAQ,CAAEC,WAAW,CAAEE,MAAO,CAAC,CAAC,CAAE,CAACL,EAAE,CAAEE,QAAQ,CAAEG,MAAM,CAAC,CAAC,CAE5F,mBAAOZ,IAAA,CAACC,GAAG,CAACmB,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAd,QAAA,CAAEA,QAAQ,CAAe,CAAC,CAC9D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}