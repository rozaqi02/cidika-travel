{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\cidika-travel\\\\src\\\\pages\\\\Explore.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// src/pages/Explore.jsx\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { AnimatePresence, motion, useScroll, useTransform } from \"framer-motion\";\nimport { useLocation } from \"react-router-dom\";\nimport usePackages from \"../hooks/usePackages\";\nimport { useCurrency } from \"../context/CurrencyContext\";\nimport { useCart } from \"../context/CartContext\";\nimport { formatMoneyFromIDR } from \"../utils/currency\";\nimport { Calendar, Check, DollarSign, Info, MapPin, Tag } from \"lucide-react\";\n\n/* ===============================\r\n   Motion presets\r\n================================= */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst listVariants = {\n  hidden: {\n    opacity: 0\n  },\n  show: {\n    opacity: 1,\n    transition: {\n      staggerChildren: 0.06,\n      delayChildren: 0.05\n    }\n  }\n};\nconst itemVariants = {\n  hidden: {\n    opacity: 0,\n    y: 10\n  },\n  show: {\n    opacity: 1,\n    y: 0,\n    transition: {\n      duration: 0.28,\n      ease: \"easeOut\"\n    }\n  }\n};\n\n/* ===============================\r\n   Helpers\r\n================================= */\nfunction getPkgImage(p) {\n  var _p$data;\n  const raw = (p === null || p === void 0 ? void 0 : p.default_image) || (p === null || p === void 0 ? void 0 : p.cover_url) || (p === null || p === void 0 ? void 0 : p.thumbnail) || (p === null || p === void 0 ? void 0 : p.thumb_url) || (p === null || p === void 0 ? void 0 : p.image_url) || Array.isArray(p === null || p === void 0 ? void 0 : p.images) && p.images[0] || (p === null || p === void 0 ? void 0 : (_p$data = p.data) === null || _p$data === void 0 ? void 0 : _p$data.images) && p.data.images[0] || \"\";\n  if (!raw) return \"/23.jpg\";\n  if (/^https?:\\/\\//i.test(raw)) return raw;\n  return raw.startsWith(\"/\") ? raw : `/${raw}`;\n}\nfunction getGalleryList(p) {\n  var _p$data2;\n  const urls = new Set();\n  const push = u => {\n    if (!u) return;\n    const s = String(u);\n    const final = /^https?:\\/\\//i.test(s) ? s : s.startsWith(\"/\") ? s : `/${s}`;\n    urls.add(final);\n  };\n  push(p === null || p === void 0 ? void 0 : p.default_image);\n  if (Array.isArray(p === null || p === void 0 ? void 0 : p.images)) p.images.forEach(push);\n  if (Array.isArray(p === null || p === void 0 ? void 0 : (_p$data2 = p.data) === null || _p$data2 === void 0 ? void 0 : _p$data2.images)) p.data.images.forEach(push);\n  if (p !== null && p !== void 0 && p.cover_url) push(p.cover_url);\n  if (p !== null && p !== void 0 && p.thumb_url) push(p.thumb_url);\n  return Array.from(urls).slice(0, 8);\n}\nfunction normalizeLocale(p, currentLang) {\n  var _p$locales;\n  const byCtx = (p === null || p === void 0 ? void 0 : p.locale) || (Array.isArray(p === null || p === void 0 ? void 0 : p.locales) ? p.locales.find(l => l.lang === currentLang) : null);\n  return byCtx || (p === null || p === void 0 ? void 0 : (_p$locales = p.locales) === null || _p$locales === void 0 ? void 0 : _p$locales[0]) || {};\n}\nfunction ItineraryTimeline({\n  data\n}) {\n  const steps = Array.isArray(data) ? data : [];\n  if (!steps.length) return null;\n  return /*#__PURE__*/_jsxDEV(\"ol\", {\n    className: \"mt-2 relative border-l border-slate-200 dark:border-slate-800 pl-4 space-y-3\",\n    children: steps.map((step, i) => {\n      var _step$time, _step$text;\n      const isObj = step && typeof step === \"object\";\n      const time = String(isObj ? (_step$time = step.time) !== null && _step$time !== void 0 ? _step$time : \"\" : \"\").trim();\n      const text = String(isObj ? (_step$text = step.text) !== null && _step$text !== void 0 ? _step$text : \"\" : step).trim();\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute -left-[9px] top-[3px] w-2 h-2 rounded-full bg-sky-500 ring-2 ring-white dark:ring-slate-900\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start gap-2\",\n          children: [time && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"px-2 py-0.5 text-[11px] rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 shrink-0\",\n            children: time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm leading-relaxed\",\n            children: text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_c = ItineraryTimeline;\nfunction PillList({\n  items\n}) {\n  const arr = Array.isArray(items) ? items : [];\n  if (!arr.length) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-1 flex flex-wrap gap-2\",\n    children: arr.map((s, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"px-2.5 py-1 rounded-full text-[12px] bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 border border-slate-200/60 dark:border-slate-700/60\",\n      children: typeof s === \"string\" ? s : JSON.stringify(s)\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n\n/* ===============================\r\n   Tilt hook\r\n================================= */\n_c2 = PillList;\nfunction useTiltRef() {\n  _s();\n  const ref = useRef(null);\n  useEffect(() => {\n    const el = ref.current;\n    if (!el) return;\n    let rAF = 0;\n    const max = 6;\n    const onMove = e => {\n      const rect = el.getBoundingClientRect();\n      const px = (e.clientX - rect.left) / rect.width - 0.5;\n      const py = (e.clientY - rect.top) / rect.height - 0.5;\n      cancelAnimationFrame(rAF);\n      rAF = requestAnimationFrame(() => {\n        el.style.transform = `perspective(1000px) rotateX(${(-py * max).toFixed(2)}deg) rotateY(${(px * max).toFixed(2)}deg)`;\n      });\n    };\n    const reset = () => {\n      cancelAnimationFrame(rAF);\n      el.style.transform = \"perspective(1000px) rotateX(0deg) rotateY(0deg)\";\n    };\n    el.addEventListener(\"mousemove\", onMove);\n    el.addEventListener(\"mouseleave\", reset);\n    return () => {\n      el.removeEventListener(\"mousemove\", onMove);\n      el.removeEventListener(\"mouseleave\", reset);\n      cancelAnimationFrame(rAF);\n    };\n  }, []);\n  return ref;\n}\n\n/* ===============================\r\n   Mini components for Detail\r\n================================= */\n_s(useTiltRef, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\nconst SectionTitle = ({\n  icon: Icon,\n  children\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex items-center gap-2 mt-2\",\n  children: [Icon && /*#__PURE__*/_jsxDEV(Icon, {\n    size: 16,\n    className: \"text-sky-600 dark:text-sky-400\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 14\n  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n    className: \"font-medium\",\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 148,\n  columnNumber: 3\n}, this);\n_c3 = SectionTitle;\nfunction QuickFacts({\n  audience,\n  pax,\n  priceLabel\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-2 grid grid-cols-3 gap-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-xl border border-slate-200 dark:border-slate-800 px-3 py-2 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-[11px] text-slate-500\",\n        children: \"Audience\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm font-semibold\",\n        children: audience === \"domestic\" ? \"Domestik\" : \"Foreign\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-xl border border-slate-200 dark:border-slate-800 px-3 py-2 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-[11px] text-slate-500\",\n        children: \"Pax\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm font-semibold\",\n        children: pax\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-xl border border-slate-200 dark:border-slate-800 px-3 py-2 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-[11px] text-slate-500\",\n        children: \"Price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm font-semibold\",\n        children: priceLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n}\n_c4 = QuickFacts;\nfunction PriceGrid({\n  tiers,\n  currency,\n  fx,\n  locale,\n  pax,\n  onPickPax,\n  t\n}) {\n  const forAudience = (tiers || []).slice().sort((a, b) => a.pax - b.pax);\n  if (!forAudience.length) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n      icon: DollarSign,\n      children: t(\"explore.prices\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-2 grid grid-cols-2 sm:grid-cols-3 gap-2\",\n      children: forAudience.map(pt => {\n        const active = pt.pax === pax;\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onPickPax === null || onPickPax === void 0 ? void 0 : onPickPax(pt.pax),\n          className: \"rounded-xl border px-3 py-2 text-left transition \" + (active ? \"border-sky-400 bg-sky-50 dark:bg-sky-950/30\" : \"border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/60\"),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-[11px] text-slate-500\",\n            children: [pt.pax, \" \", t(\"home.pax\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-semibold\",\n            children: formatMoneyFromIDR(pt.price_idr, currency, fx, locale)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this)]\n        }, pt.pax, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_c5 = PriceGrid;\nfunction IncludeList({\n  items\n}) {\n  const arr = Array.isArray(items) ? items : [];\n  if (!arr.length) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2\",\n    children: arr.map((s, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-start gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Check, {\n        size: 16,\n        className: \"mt-0.5 text-emerald-600 dark:text-emerald-400 shrink-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm\",\n        children: typeof s === \"string\" ? s : JSON.stringify(s)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n_c6 = IncludeList;\nfunction GalleryStrip({\n  images\n}) {\n  if (!(images !== null && images !== void 0 && images.length)) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-2 overflow-x-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 snap-x\",\n      children: images.map((src, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"snap-start shrink-0\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: src,\n          alt: \"\",\n          loading: \"lazy\",\n          className: \"w-28 h-20 object-cover rounded-xl border border-slate-200 dark:border-slate-800\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this);\n}\n\n/* ===============================\r\n   PackageCard\r\n================================= */\n_c7 = GalleryStrip;\nfunction PackageCard({\n  p,\n  loc,\n  audience,\n  pax,\n  setPax,\n  currency,\n  fx,\n  locale,\n  isOpen,\n  onToggle,\n  onRegisterRef,\n  addItem,\n  t\n}) {\n  _s2();\n  var _loc$spots, _loc$itinerary, _p$price_tiers, _loc$include;\n  const cover = getPkgImage(p);\n  const gallery = getGalleryList(p);\n  const tiltRef = useTiltRef();\n  const tiersAll = (p.price_tiers || []).filter(x => x.audience === audience);\n  const tierForSelectedPax = tiersAll.find(x => x.pax === pax) || (p.price_tiers || []).find(x => x.pax === pax) || tiersAll[0] || (p.price_tiers || [])[0];\n  const priceSelected = (tierForSelectedPax === null || tierForSelectedPax === void 0 ? void 0 : tierForSelectedPax.price_idr) || 0;\n  return /*#__PURE__*/_jsxDEV(motion.article, {\n    variants: itemVariants,\n    ref: el => onRegisterRef === null || onRegisterRef === void 0 ? void 0 : onRegisterRef(p.id, el),\n    id: `pkg-${p.id}`,\n    className: \"card bg-transparent relative overflow-hidden p-0 hover-lift\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: tiltRef,\n        className: \"relative aspect-[16/9] overflow-hidden will-change-transform transform-gpu\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: cover,\n          alt: \"\",\n          loading: \"lazy\",\n          className: \"absolute inset-0 w-full h-full object-cover hero-img\",\n          onLoad: e => e.currentTarget.classList.add(\"kenburns\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 animate-pulse bg-gradient-to-br from-slate-200/50 to-slate-100/30 dark:from-slate-800/30 dark:to-slate-900/30 pointer-events-none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-x-0 bottom-0 p-4 pt-12 bg-gradient-to-t from-white/90 via-white/50 to-transparent dark:from-slate-950/85 dark:via-slate-950/35\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap items-end justify-between gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-lg\",\n                children: (loc === null || loc === void 0 ? void 0 : loc.title) || p.slug\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-[13px] text-slate-600 dark:text-slate-300 line-clamp-1\",\n                children: ((loc === null || loc === void 0 ? void 0 : loc.spots) || []).slice(0, 6).join(\" • \")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sky-700 dark:text-sky-300 font-extrabold\",\n                children: [formatMoneyFromIDR(priceSelected, currency, fx, locale), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-normal text-slate-600 dark:text-slate-400\",\n                  children: [\"/ \", t(\"home.perPax\")]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-[11px] text-slate-500 dark:text-slate-400\",\n                children: [audience === \"domestic\" ? \"Domestik\" : \"Foreign\", \" \\u2022 \", pax, \" \", t(\"home.pax\")]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 py-2 flex items-center justify-between gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onToggle,\n        className: \"btn glass\",\n        children: isOpen ? t(\"explore.hideDetail\", {\n          defaultValue: \"Hide Detail\"\n        }) : t(\"explore.seeDetail\", {\n          defaultValue: \"See Detail\"\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: pax,\n          onChange: e => setPax(parseInt(e.target.value)),\n          className: \"px-3 py-2 rounded-2xl\",\n          children: [1, 2, 3, 4, 5, 6].map(n => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: n,\n            children: [n, \" \", t(\"home.pax\")]\n          }, n, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n          className: \"btn btn-primary glass\",\n          whileTap: {\n            scale: 0.98\n          },\n          onClick: () => {\n            var _find;\n            // 1) Tambah item\n            addItem({\n              id: p.id,\n              title: (loc === null || loc === void 0 ? void 0 : loc.title) || p.slug,\n              price: ((_find = (p.price_tiers || []).find(x => x.pax === pax && x.audience === audience)) === null || _find === void 0 ? void 0 : _find.price_idr) || priceSelected,\n              pax,\n              qty: 1,\n              audience\n            });\n            // 2) Trigger anim pusat layar\n            window.dispatchEvent(new CustomEvent(\"WISHLIST_FX\"));\n          },\n          children: t(\"home.addToCart\", {\n            defaultValue: \"Add to Cart\"\n          }).replace(/cart|keranjang/i, \"Wishlist\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      initial: false,\n      children: isOpen && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          height: 0,\n          opacity: 0\n        },\n        animate: {\n          height: \"auto\",\n          opacity: 1\n        },\n        exit: {\n          height: 0,\n          opacity: 0\n        },\n        transition: {\n          type: \"spring\",\n          stiffness: 160,\n          damping: 24\n        },\n        className: \"px-4 pb-4\",\n        children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n          icon: Tag,\n          children: (loc === null || loc === void 0 ? void 0 : loc.summary) || \"Highlights\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(GalleryStrip, {\n          images: gallery\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(QuickFacts, {\n          audience: audience,\n          pax: pax,\n          priceLabel: formatMoneyFromIDR(priceSelected, currency, fx, locale)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4 pt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [((loc === null || loc === void 0 ? void 0 : (_loc$spots = loc.spots) === null || _loc$spots === void 0 ? void 0 : _loc$spots.length) || 0) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n                icon: MapPin,\n                children: t(\"explore.spots\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(PillList, {\n                items: loc === null || loc === void 0 ? void 0 : loc.spots\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), ((loc === null || loc === void 0 ? void 0 : (_loc$itinerary = loc.itinerary) === null || _loc$itinerary === void 0 ? void 0 : _loc$itinerary.length) || 0) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n                icon: Calendar,\n                children: t(\"explore.itinerary\", {\n                  defaultValue: \"Itinerary\"\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(ItineraryTimeline, {\n                data: loc === null || loc === void 0 ? void 0 : loc.itinerary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [(((_p$price_tiers = p.price_tiers) === null || _p$price_tiers === void 0 ? void 0 : _p$price_tiers.length) || 0) > 0 && /*#__PURE__*/_jsxDEV(PriceGrid, {\n              tiers: (p.price_tiers || []).filter(pt => pt.audience === audience),\n              currency: currency,\n              fx: fx,\n              locale: locale,\n              pax: pax,\n              onPickPax: n => setPax(n),\n              t: t\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 19\n            }, this), ((loc === null || loc === void 0 ? void 0 : (_loc$include = loc.include) === null || _loc$include === void 0 ? void 0 : _loc$include.length) || 0) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(SectionTitle, {\n                icon: Check,\n                children: t(\"explore.includes\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(IncludeList, {\n                items: loc === null || loc === void 0 ? void 0 : loc.include\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), (loc === null || loc === void 0 ? void 0 : loc.note) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 p-3 flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Info, {\n                size: 16,\n                className: \"mt-1 text-amber-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-slate-600 dark:text-slate-300\",\n                children: loc.note\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this)]\n      }, \"detail\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }, this);\n}\n\n/* ===============================\r\n   Explore Page\r\n================================= */\n_s2(PackageCard, \"ebXaQ30AXPq8mZckSSOW4Qx76XQ=\", false, function () {\n  return [useTiltRef];\n});\n_c8 = PackageCard;\nexport default function Explore() {\n  _s3();\n  var _location$state, _location$state2;\n  const {\n    t\n  } = useTranslation();\n  const {\n    rows: data = []\n  } = usePackages();\n  const {\n    fx,\n    currency,\n    locale\n  } = useCurrency();\n  const {\n    addItem\n  } = useCart();\n  const location = useLocation();\n  const qs = new URLSearchParams(location.search);\n  const stateOpenId = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.openId) || null;\n  const qsId = qs.get(\"pkg\");\n  const initialOpenId = stateOpenId || qsId || null;\n  const initialPax = Number((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.pax) || 1;\n  const [openId, setOpenId] = useState(initialOpenId);\n  const [pax, setPax] = useState(initialPax);\n  const [audience, setAudience] = useState(\"domestic\");\n  const [query, setQuery] = useState(\"\");\n  const [sortBy, setSortBy] = useState(\"price\");\n  const [compact, setCompact] = useState(false);\n  const refs = useRef({});\n  const registerRef = (id, el) => {\n    if (el) refs.current[id] = el;\n  };\n  useEffect(() => {\n    if (!openId) return;\n    const el = refs.current[openId];\n    if (el) el.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"start\"\n    });\n  }, [openId, data]);\n\n  // sticky glass toolbar shrink on scroll\n  const {\n    scrollY\n  } = useScroll();\n  const barH = useTransform(scrollY, [0, 80], [\"4.5rem\", \"3.5rem\"]);\n  const barBg = useTransform(scrollY, [0, 80], [\"rgba(255,255,255,0.65)\", \"rgba(255,255,255,0.9)\"]);\n  const barBgDark = useTransform(scrollY, [0, 80], [\"rgba(2,6,23,0.55)\", \"rgba(2,6,23,0.75)\"]);\n  const barShadow = useTransform(scrollY, [0, 80], [\"0 6px 24px rgba(2,6,23,.06)\", \"0 4px 18px rgba(2,6,23,.12)\"]);\n\n  // filter + sort\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    const list = data.map(p => {\n      const loc = normalizeLocale(p, locale === null || locale === void 0 ? void 0 : locale.slice(0, 2));\n      return {\n        ...p,\n        _loc: loc\n      };\n    });\n    const searched = q ? list.filter(p => {\n      var _p$_loc, _p$_loc2;\n      const hay = (((_p$_loc = p._loc) === null || _p$_loc === void 0 ? void 0 : _p$_loc.title) || \"\") + \" \" + (Array.isArray((_p$_loc2 = p._loc) === null || _p$_loc2 === void 0 ? void 0 : _p$_loc2.spots) ? p._loc.spots.join(\" \") : \"\") + \" \" + (p.slug || \"\");\n      return hay.toLowerCase().includes(q);\n    }) : list;\n    if (sortBy === \"name\") {\n      return searched.sort((a, b) => {\n        var _a$_loc, _b$_loc;\n        return (((_a$_loc = a._loc) === null || _a$_loc === void 0 ? void 0 : _a$_loc.title) || \"\").localeCompare(((_b$_loc = b._loc) === null || _b$_loc === void 0 ? void 0 : _b$_loc.title) || \"\");\n      });\n    }\n    return searched.sort((a, b) => {\n      const pa = (a.price_tiers || []).find(x => x.pax === pax && x.audience === audience) || (a.price_tiers || []).find(x => x.pax === pax) || (a.price_tiers || [])[0];\n      const pb = (b.price_tiers || []).find(x => x.pax === pax && x.audience === audience) || (b.price_tiers || []).find(x => x.pax === pax) || (b.price_tiers || [])[0];\n      return ((pa === null || pa === void 0 ? void 0 : pa.price_idr) || 0) - ((pb === null || pb === void 0 ? void 0 : pb.price_idr) || 0);\n    });\n  }, [data, query, pax, sortBy, audience, locale]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-2 space-y-5\",\n    children: [/*#__PURE__*/_jsxDEV(motion.div, {\n      style: {\n        height: barH,\n        boxShadow: barShadow\n      },\n      className: \"sticky top-16 z-[5] rounded-2xl border border-slate-200/60 dark:border-slate-800/60 backdrop-blur-md px-3 sm:px-4 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"absolute inset-0 rounded-2xl\",\n        style: {\n          background: barBg\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"absolute inset-0 rounded-2xl hidden dark:block\",\n        style: {\n          background: barBgDark\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full flex flex-wrap items-center gap-2 sm:gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100 pr-2\",\n          children: t(\"explore.title\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 min-w-[160px]\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: query,\n              onChange: e => setQuery(e.target.value),\n              placeholder: t(\"explore.searchPlaceholder\", {\n                defaultValue: \"Search packages or spots…\"\n              }),\n              className: \"w-full pl-9 pr-3 py-2 rounded-2xl border-slate-200 dark:border-slate-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\",\n              children: \"\\uD83D\\uDD0E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 bg-white/60 dark:bg-slate-900/50 border border-slate-200/60 dark:border-slate-700/60 rounded-2xl p-1\",\n          children: [\"domestic\", \"foreign\"].map(k => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAudience(k),\n            className: `btn ${audience === k ? \"btn-primary\" : \"btn-outline\"} !py-1 !px-2 text-xs`,\n            children: k === \"domestic\" ? t(\"explore.domestic\", {\n              defaultValue: \"Domestik\"\n            }) : \"Foreign\"\n          }, k, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"pax\",\n            className: \"text-xs text-slate-500 dark:text-slate-400\",\n            children: t(\"home.calcFor\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"pax\",\n            value: pax,\n            onChange: e => setPax(parseInt(e.target.value)),\n            className: \"px-3 py-2 rounded-2xl\",\n            children: [1, 2, 3, 4, 5, 6].map(n => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: n,\n              children: [n, \" \", t(\"home.pax\")]\n            }, n, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: sortBy,\n            onChange: e => setSortBy(e.target.value),\n            className: \"px-3 py-2 rounded-2xl\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"price\",\n              children: t(\"explore.sortPrice\", {\n                defaultValue: \"Termurah\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"name\",\n              children: t(\"explore.sortName\", {\n                defaultValue: \"A-Z\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline !py-2 !px-3\",\n            onClick: () => setCompact(v => !v),\n            title: compact ? \"Cozy grid\" : \"Compact grid\",\n            children: compact ? \"🔳\" : \"🔲\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      variants: listVariants,\n      initial: \"hidden\",\n      animate: \"show\",\n      className: `grid gap-4 ${compact ? \"sm:grid-cols-3\" : \"md:grid-cols-2\"}`,\n      children: filtered.map(p => {\n        const loc = normalizeLocale(p, locale === null || locale === void 0 ? void 0 : locale.slice(0, 2));\n        const isOpen = openId === p.id;\n        return /*#__PURE__*/_jsxDEV(PackageCard, {\n          p: p,\n          loc: loc,\n          audience: audience,\n          pax: pax,\n          setPax: setPax,\n          currency: currency,\n          fx: fx,\n          locale: locale,\n          isOpen: isOpen,\n          onToggle: () => setOpenId(isOpen ? null : p.id),\n          onRegisterRef: registerRef,\n          addItem: addItem,\n          t: t\n        }, p.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 7\n    }, this), !filtered.length && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-slate-500 dark:text-slate-400 py-16\",\n      children: t(\"explore.empty\", {\n        defaultValue: \"No packages match your filters.\"\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 504,\n    columnNumber: 5\n  }, this);\n}\n_s3(Explore, \"gCVxoVxXzYEzzvis7jlJvUPYusw=\", false, function () {\n  return [useTranslation, usePackages, useCurrency, useCart, useLocation, useScroll, useTransform, useTransform, useTransform, useTransform];\n});\n_c9 = Explore;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n$RefreshReg$(_c, \"ItineraryTimeline\");\n$RefreshReg$(_c2, \"PillList\");\n$RefreshReg$(_c3, \"SectionTitle\");\n$RefreshReg$(_c4, \"QuickFacts\");\n$RefreshReg$(_c5, \"PriceGrid\");\n$RefreshReg$(_c6, \"IncludeList\");\n$RefreshReg$(_c7, \"GalleryStrip\");\n$RefreshReg$(_c8, \"PackageCard\");\n$RefreshReg$(_c9, \"Explore\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useTranslation","AnimatePresence","motion","useScroll","useTransform","useLocation","usePackages","useCurrency","useCart","formatMoneyFromIDR","Calendar","Check","DollarSign","Info","MapPin","Tag","jsxDEV","_jsxDEV","Fragment","_Fragment","listVariants","hidden","opacity","show","transition","staggerChildren","delayChildren","itemVariants","y","duration","ease","getPkgImage","p","_p$data","raw","default_image","cover_url","thumbnail","thumb_url","image_url","Array","isArray","images","data","test","startsWith","getGalleryList","_p$data2","urls","Set","push","u","s","String","final","add","forEach","from","slice","normalizeLocale","currentLang","_p$locales","byCtx","locale","locales","find","l","lang","ItineraryTimeline","steps","length","className","children","map","step","i","_step$time","_step$text","isObj","time","trim","text","fileName","_jsxFileName","lineNumber","columnNumber","_c","PillList","items","arr","JSON","stringify","_c2","useTiltRef","_s","ref","el","current","rAF","max","onMove","e","rect","getBoundingClientRect","px","clientX","left","width","py","clientY","top","height","cancelAnimationFrame","requestAnimationFrame","style","transform","toFixed","reset","addEventListener","removeEventListener","SectionTitle","icon","Icon","size","_c3","QuickFacts","audience","pax","priceLabel","_c4","PriceGrid","tiers","currency","fx","onPickPax","t","forAudience","sort","a","b","pt","active","onClick","price_idr","_c5","IncludeList","_c6","GalleryStrip","src","alt","loading","_c7","PackageCard","loc","setPax","isOpen","onToggle","onRegisterRef","addItem","_s2","_loc$spots","_loc$itinerary","_p$price_tiers","_loc$include","cover","gallery","tiltRef","tiersAll","price_tiers","filter","x","tierForSelectedPax","priceSelected","article","variants","id","onLoad","currentTarget","classList","title","slug","spots","join","defaultValue","value","onChange","parseInt","target","n","button","whileTap","scale","_find","price","qty","window","dispatchEvent","CustomEvent","replace","initial","div","animate","exit","type","stiffness","damping","summary","itinerary","include","note","_c8","Explore","_s3","_location$state","_location$state2","rows","location","qs","URLSearchParams","search","stateOpenId","state","openId","qsId","get","initialOpenId","initialPax","Number","setOpenId","setAudience","query","setQuery","sortBy","setSortBy","compact","setCompact","refs","registerRef","scrollIntoView","behavior","block","scrollY","barH","barBg","barBgDark","barShadow","filtered","q","toLowerCase","list","_loc","searched","_p$_loc","_p$_loc2","hay","includes","_a$_loc","_b$_loc","localeCompare","pa","pb","boxShadow","background","placeholder","k","htmlFor","v","_c9","$RefreshReg$"],"sources":["C:/projects/cidika-travel/src/pages/Explore.jsx"],"sourcesContent":["// src/pages/Explore.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { AnimatePresence, motion, useScroll, useTransform } from \"framer-motion\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport usePackages from \"../hooks/usePackages\";\r\nimport { useCurrency } from \"../context/CurrencyContext\";\r\nimport { useCart } from \"../context/CartContext\";\r\nimport { formatMoneyFromIDR } from \"../utils/currency\";\r\nimport { Calendar, Check, DollarSign, Info, MapPin, Tag } from \"lucide-react\";\r\n\r\n/* ===============================\r\n   Motion presets\r\n================================= */\r\nconst listVariants = {\r\n  hidden: { opacity: 0 },\r\n  show: { opacity: 1, transition: { staggerChildren: 0.06, delayChildren: 0.05 } },\r\n};\r\nconst itemVariants = {\r\n  hidden: { opacity: 0, y: 10 },\r\n  show: { opacity: 1, y: 0, transition: { duration: 0.28, ease: \"easeOut\" } },\r\n};\r\n\r\n/* ===============================\r\n   Helpers\r\n================================= */\r\nfunction getPkgImage(p) {\r\n  const raw =\r\n    p?.default_image ||\r\n    p?.cover_url ||\r\n    p?.thumbnail ||\r\n    p?.thumb_url ||\r\n    p?.image_url ||\r\n    (Array.isArray(p?.images) && p.images[0]) ||\r\n    (p?.data?.images && p.data.images[0]) ||\r\n    \"\";\r\n  if (!raw) return \"/23.jpg\";\r\n  if (/^https?:\\/\\//i.test(raw)) return raw;\r\n  return raw.startsWith(\"/\") ? raw : `/${raw}`;\r\n}\r\n\r\nfunction getGalleryList(p) {\r\n  const urls = new Set();\r\n  const push = (u) => {\r\n    if (!u) return;\r\n    const s = String(u);\r\n    const final = /^https?:\\/\\//i.test(s) ? s : s.startsWith(\"/\") ? s : `/${s}`;\r\n    urls.add(final);\r\n  };\r\n  push(p?.default_image);\r\n  if (Array.isArray(p?.images)) p.images.forEach(push);\r\n  if (Array.isArray(p?.data?.images)) p.data.images.forEach(push);\r\n  if (p?.cover_url) push(p.cover_url);\r\n  if (p?.thumb_url) push(p.thumb_url);\r\n  return Array.from(urls).slice(0, 8);\r\n}\r\n\r\nfunction normalizeLocale(p, currentLang) {\r\n  const byCtx = p?.locale || (Array.isArray(p?.locales) ? p.locales.find((l) => l.lang === currentLang) : null);\r\n  return byCtx || p?.locales?.[0] || {};\r\n}\r\n\r\nfunction ItineraryTimeline({ data }) {\r\n  const steps = Array.isArray(data) ? data : [];\r\n  if (!steps.length) return null;\r\n  return (\r\n    <ol className=\"mt-2 relative border-l border-slate-200 dark:border-slate-800 pl-4 space-y-3\">\r\n      {steps.map((step, i) => {\r\n        const isObj = step && typeof step === \"object\";\r\n        const time = String(isObj ? step.time ?? \"\" : \"\").trim();\r\n        const text = String(isObj ? step.text ?? \"\" : step).trim();\r\n\r\n        return (\r\n          <li key={i} className=\"relative\">\r\n            <span className=\"absolute -left-[9px] top-[3px] w-2 h-2 rounded-full bg-sky-500 ring-2 ring-white dark:ring-slate-900\" />\r\n            <div className=\"flex items-start gap-2\">\r\n              {time && (\r\n                <span className=\"px-2 py-0.5 text-[11px] rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 shrink-0\">\r\n                  {time}\r\n                </span>\r\n              )}\r\n              <p className=\"text-sm leading-relaxed\">{text}</p>\r\n            </div>\r\n          </li>\r\n        );\r\n      })}\r\n    </ol>\r\n  );\r\n}\r\n\r\nfunction PillList({ items }) {\r\n  const arr = Array.isArray(items) ? items : [];\r\n  if (!arr.length) return null;\r\n  return (\r\n    <div className=\"mt-1 flex flex-wrap gap-2\">\r\n      {arr.map((s, i) => (\r\n        <span\r\n          key={i}\r\n          className=\"px-2.5 py-1 rounded-full text-[12px] bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 border border-slate-200/60 dark:border-slate-700/60\"\r\n        >\r\n          {typeof s === \"string\" ? s : JSON.stringify(s)}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ===============================\r\n   Tilt hook\r\n================================= */\r\nfunction useTiltRef() {\r\n  const ref = useRef(null);\r\n  useEffect(() => {\r\n    const el = ref.current;\r\n    if (!el) return;\r\n    let rAF = 0;\r\n    const max = 6;\r\n    const onMove = (e) => {\r\n      const rect = el.getBoundingClientRect();\r\n      const px = (e.clientX - rect.left) / rect.width - 0.5;\r\n      const py = (e.clientY - rect.top) / rect.height - 0.5;\r\n      cancelAnimationFrame(rAF);\r\n      rAF = requestAnimationFrame(() => {\r\n        el.style.transform = `perspective(1000px) rotateX(${(-py * max).toFixed(2)}deg) rotateY(${(px * max).toFixed(\r\n          2\r\n        )}deg)`;\r\n      });\r\n    };\r\n    const reset = () => {\r\n      cancelAnimationFrame(rAF);\r\n      el.style.transform = \"perspective(1000px) rotateX(0deg) rotateY(0deg)\";\r\n    };\r\n    el.addEventListener(\"mousemove\", onMove);\r\n    el.addEventListener(\"mouseleave\", reset);\r\n    return () => {\r\n      el.removeEventListener(\"mousemove\", onMove);\r\n      el.removeEventListener(\"mouseleave\", reset);\r\n      cancelAnimationFrame(rAF);\r\n    };\r\n  }, []);\r\n  return ref;\r\n}\r\n\r\n/* ===============================\r\n   Mini components for Detail\r\n================================= */\r\nconst SectionTitle = ({ icon: Icon, children }) => (\r\n  <div className=\"flex items-center gap-2 mt-2\">\r\n    {Icon && <Icon size={16} className=\"text-sky-600 dark:text-sky-400\" />}\r\n    <h4 className=\"font-medium\">{children}</h4>\r\n  </div>\r\n);\r\n\r\nfunction QuickFacts({ audience, pax, priceLabel }) {\r\n  return (\r\n    <div className=\"mt-2 grid grid-cols-3 gap-2\">\r\n      <div className=\"rounded-xl border border-slate-200 dark:border-slate-800 px-3 py-2 text-center\">\r\n        <div className=\"text-[11px] text-slate-500\">Audience</div>\r\n        <div className=\"text-sm font-semibold\">{audience === \"domestic\" ? \"Domestik\" : \"Foreign\"}</div>\r\n      </div>\r\n      <div className=\"rounded-xl border border-slate-200 dark:border-slate-800 px-3 py-2 text-center\">\r\n        <div className=\"text-[11px] text-slate-500\">Pax</div>\r\n        <div className=\"text-sm font-semibold\">{pax}</div>\r\n      </div>\r\n      <div className=\"rounded-xl border border-slate-200 dark:border-slate-800 px-3 py-2 text-center\">\r\n        <div className=\"text-[11px] text-slate-500\">Price</div>\r\n        <div className=\"text-sm font-semibold\">{priceLabel}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PriceGrid({ tiers, currency, fx, locale, pax, onPickPax, t }) {\r\n  const forAudience = (tiers || []).slice().sort((a, b) => a.pax - b.pax);\r\n  if (!forAudience.length) return null;\r\n  return (\r\n    <>\r\n      <SectionTitle icon={DollarSign}>{t(\"explore.prices\")}</SectionTitle>\r\n      <div className=\"mt-2 grid grid-cols-2 sm:grid-cols-3 gap-2\">\r\n        {forAudience.map((pt) => {\r\n          const active = pt.pax === pax;\r\n          return (\r\n            <button\r\n              key={pt.pax}\r\n              onClick={() => onPickPax?.(pt.pax)}\r\n              className={\r\n                \"rounded-xl border px-3 py-2 text-left transition \" +\r\n                (active\r\n                  ? \"border-sky-400 bg-sky-50 dark:bg-sky-950/30\"\r\n                  : \"border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/60\")\r\n              }\r\n            >\r\n              <div className=\"text-[11px] text-slate-500\">\r\n                {pt.pax} {t(\"home.pax\")}\r\n              </div>\r\n              <div className=\"text-sm font-semibold\">\r\n                {formatMoneyFromIDR(pt.price_idr, currency, fx, locale)}\r\n              </div>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction IncludeList({ items }) {\r\n  const arr = Array.isArray(items) ? items : [];\r\n  if (!arr.length) return null;\r\n  return (\r\n    <div className=\"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n      {arr.map((s, i) => (\r\n        <div key={i} className=\"flex items-start gap-2\">\r\n          <Check size={16} className=\"mt-0.5 text-emerald-600 dark:text-emerald-400 shrink-0\" />\r\n          <span className=\"text-sm\">{typeof s === \"string\" ? s : JSON.stringify(s)}</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction GalleryStrip({ images }) {\r\n  if (!images?.length) return null;\r\n  return (\r\n    <div className=\"mt-2 overflow-x-auto\">\r\n      <div className=\"flex gap-2 snap-x\">\r\n        {images.map((src, i) => (\r\n          <div key={i} className=\"snap-start shrink-0\">\r\n            <img\r\n              src={src}\r\n              alt=\"\"\r\n              loading=\"lazy\"\r\n              className=\"w-28 h-20 object-cover rounded-xl border border-slate-200 dark:border-slate-800\"\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ===============================\r\n   PackageCard\r\n================================= */\r\nfunction PackageCard({\r\n  p,\r\n  loc,\r\n  audience,\r\n  pax,\r\n  setPax,\r\n  currency,\r\n  fx,\r\n  locale,\r\n  isOpen,\r\n  onToggle,\r\n  onRegisterRef,\r\n  addItem,\r\n  t,\r\n}) {\r\n  const cover = getPkgImage(p);\r\n  const gallery = getGalleryList(p);\r\n  const tiltRef = useTiltRef();\r\n\r\n  const tiersAll = (p.price_tiers || []).filter((x) => x.audience === audience);\r\n  const tierForSelectedPax =\r\n    tiersAll.find((x) => x.pax === pax) ||\r\n    (p.price_tiers || []).find((x) => x.pax === pax) ||\r\n    tiersAll[0] ||\r\n    (p.price_tiers || [])[0];\r\n  const priceSelected = tierForSelectedPax?.price_idr || 0;\r\n\r\n  return (\r\n    <motion.article\r\n      variants={itemVariants}\r\n      ref={(el) => onRegisterRef?.(p.id, el)}\r\n      id={`pkg-${p.id}`}\r\n      className=\"card bg-transparent relative overflow-hidden p-0 hover-lift\"\r\n    >\r\n      {/* Cover */}\r\n      <div className=\"relative\">\r\n        <div ref={tiltRef} className=\"relative aspect-[16/9] overflow-hidden will-change-transform transform-gpu\">\r\n          <img\r\n            src={cover}\r\n            alt=\"\"\r\n            loading=\"lazy\"\r\n            className=\"absolute inset-0 w-full h-full object-cover hero-img\"\r\n            onLoad={(e) => e.currentTarget.classList.add(\"kenburns\")}\r\n          />\r\n          <div className=\"absolute inset-0 animate-pulse bg-gradient-to-br from-slate-200/50 to-slate-100/30 dark:from-slate-800/30 dark:to-slate-900/30 pointer-events-none\" />\r\n          <div className=\"absolute inset-x-0 bottom-0 p-4 pt-12 bg-gradient-to-t from-white/90 via-white/50 to-transparent dark:from-slate-950/85 dark:via-slate-950/35\">\r\n            <div className=\"flex flex-wrap items-end justify-between gap-2\">\r\n              <div>\r\n                <h3 className=\"font-semibold text-lg\">{loc?.title || p.slug}</h3>\r\n                <p className=\"text-[13px] text-slate-600 dark:text-slate-300 line-clamp-1\">\r\n                  {(loc?.spots || []).slice(0, 6).join(\" • \")}\r\n                </p>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-sky-700 dark:text-sky-300 font-extrabold\">\r\n                  {formatMoneyFromIDR(priceSelected, currency, fx, locale)}{\" \"}\r\n                  <span className=\"text-sm font-normal text-slate-600 dark:text-slate-400\">/ {t(\"home.perPax\")}</span>\r\n                </p>\r\n                <div className=\"text-[11px] text-slate-500 dark:text-slate-400\">\r\n                  {audience === \"domestic\" ? \"Domestik\" : \"Foreign\"} • {pax} {t(\"home.pax\")}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Actions row */}\r\n      <div className=\"px-4 py-2 flex items-center justify-between gap-3\">\r\n        <button onClick={onToggle} className=\"btn glass\">\r\n          {isOpen ? t(\"explore.hideDetail\", { defaultValue: \"Hide Detail\" }) : t(\"explore.seeDetail\", { defaultValue: \"See Detail\" })}\r\n        </button>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <select value={pax} onChange={(e) => setPax(parseInt(e.target.value))} className=\"px-3 py-2 rounded-2xl\">\r\n            {[1, 2, 3, 4, 5, 6].map((n) => (\r\n              <option key={n} value={n}>\r\n                {n} {t(\"home.pax\")}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <motion.button\r\n            className=\"btn btn-primary glass\"\r\n            whileTap={{ scale: 0.98 }}\r\n            onClick={() => {\r\n              // 1) Tambah item\r\n              addItem({\r\n                id: p.id,\r\n                title: loc?.title || p.slug,\r\n                price:\r\n                  (p.price_tiers || []).find((x) => x.pax === pax && x.audience === audience)?.price_idr ||\r\n                  priceSelected,\r\n                pax,\r\n                qty: 1,\r\n                audience,\r\n              });\r\n              // 2) Trigger anim pusat layar\r\n              window.dispatchEvent(new CustomEvent(\"WISHLIST_FX\"));\r\n            }}\r\n          >\r\n            {t(\"home.addToCart\", { defaultValue: \"Add to Cart\" }).replace(/cart|keranjang/i, \"Wishlist\")}\r\n          </motion.button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Details (revamped) */}\r\n      <AnimatePresence initial={false}>\r\n        {isOpen && (\r\n          <motion.div\r\n            key=\"detail\"\r\n            initial={{ height: 0, opacity: 0 }}\r\n            animate={{ height: \"auto\", opacity: 1 }}\r\n            exit={{ height: 0, opacity: 0 }}\r\n            transition={{ type: \"spring\", stiffness: 160, damping: 24 }}\r\n            className=\"px-4 pb-4\"\r\n          >\r\n            {/* Gallery Strip */}\r\n            <SectionTitle icon={Tag}>{loc?.summary || \"Highlights\"}</SectionTitle>\r\n            <GalleryStrip images={gallery} />\r\n\r\n            {/* Quick facts */}\r\n            <QuickFacts\r\n              audience={audience}\r\n              pax={pax}\r\n              priceLabel={formatMoneyFromIDR(priceSelected, currency, fx, locale)}\r\n            />\r\n\r\n            <div className=\"grid md:grid-cols-2 gap-4 pt-3\">\r\n              {/* Column A */}\r\n              <div>\r\n                {(loc?.spots?.length || 0) > 0 && (\r\n                  <>\r\n                    <SectionTitle icon={MapPin}>{t(\"explore.spots\")}</SectionTitle>\r\n                    <PillList items={loc?.spots} />\r\n                  </>\r\n                )}\r\n\r\n                {(loc?.itinerary?.length || 0) > 0 && (\r\n                  <>\r\n                    <SectionTitle icon={Calendar}>{t(\"explore.itinerary\", { defaultValue: \"Itinerary\" })}</SectionTitle>\r\n                    <ItineraryTimeline data={loc?.itinerary} />\r\n                  </>\r\n                )}\r\n              </div>\r\n\r\n              {/* Column B */}\r\n              <div>\r\n                {(p.price_tiers?.length || 0) > 0 && (\r\n                  <PriceGrid\r\n                    tiers={(p.price_tiers || []).filter((pt) => pt.audience === audience)}\r\n                    currency={currency}\r\n                    fx={fx}\r\n                    locale={locale}\r\n                    pax={pax}\r\n                    onPickPax={(n) => setPax(n)}\r\n                    t={t}\r\n                  />\r\n                )}\r\n\r\n                {(loc?.include?.length || 0) > 0 && (\r\n                  <>\r\n                    <SectionTitle icon={Check}>{t(\"explore.includes\")}</SectionTitle>\r\n                    <IncludeList items={loc?.include} />\r\n                  </>\r\n                )}\r\n\r\n                {loc?.note && (\r\n                  <div className=\"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 p-3 flex gap-2\">\r\n                    <Info size={16} className=\"mt-1 text-amber-600\" />\r\n                    <p className=\"text-sm text-slate-600 dark:text-slate-300\">{loc.note}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </motion.article>\r\n  );\r\n}\r\n\r\n/* ===============================\r\n   Explore Page\r\n================================= */\r\nexport default function Explore() {\r\n  const { t } = useTranslation();\r\n  const { rows: data = [] } = usePackages();\r\n  const { fx, currency, locale } = useCurrency();\r\n  const { addItem } = useCart();\r\n\r\n  const location = useLocation();\r\n  const qs = new URLSearchParams(location.search);\r\n  const stateOpenId = location.state?.openId || null;\r\n  const qsId = qs.get(\"pkg\");\r\n  const initialOpenId = stateOpenId || qsId || null;\r\n  const initialPax = Number(location.state?.pax) || 1;\r\n\r\n  const [openId, setOpenId] = useState(initialOpenId);\r\n  const [pax, setPax] = useState(initialPax);\r\n  const [audience, setAudience] = useState(\"domestic\");\r\n  const [query, setQuery] = useState(\"\");\r\n  const [sortBy, setSortBy] = useState(\"price\");\r\n  const [compact, setCompact] = useState(false);\r\n\r\n  const refs = useRef({});\r\n  const registerRef = (id, el) => {\r\n    if (el) refs.current[id] = el;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!openId) return;\r\n    const el = refs.current[openId];\r\n    if (el) el.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n  }, [openId, data]);\r\n\r\n  // sticky glass toolbar shrink on scroll\r\n  const { scrollY } = useScroll();\r\n  const barH = useTransform(scrollY, [0, 80], [\"4.5rem\", \"3.5rem\"]);\r\n  const barBg = useTransform(scrollY, [0, 80], [\"rgba(255,255,255,0.65)\", \"rgba(255,255,255,0.9)\"]);\r\n  const barBgDark = useTransform(scrollY, [0, 80], [\"rgba(2,6,23,0.55)\", \"rgba(2,6,23,0.75)\"]);\r\n  const barShadow = useTransform(scrollY, [0, 80], [\"0 6px 24px rgba(2,6,23,.06)\", \"0 4px 18px rgba(2,6,23,.12)\"]);\r\n\r\n  // filter + sort\r\n  const filtered = useMemo(() => {\r\n    const q = query.trim().toLowerCase();\r\n    const list = data.map((p) => {\r\n      const loc = normalizeLocale(p, locale?.slice(0, 2));\r\n      return { ...p, _loc: loc };\r\n    });\r\n    const searched = q\r\n      ? list.filter((p) => {\r\n          const hay =\r\n            (p._loc?.title || \"\") +\r\n            \" \" +\r\n            (Array.isArray(p._loc?.spots) ? p._loc.spots.join(\" \") : \"\") +\r\n            \" \" +\r\n            (p.slug || \"\");\r\n          return hay.toLowerCase().includes(q);\r\n        })\r\n      : list;\r\n\r\n    if (sortBy === \"name\") {\r\n      return searched.sort((a, b) => (a._loc?.title || \"\").localeCompare(b._loc?.title || \"\"));\r\n    }\r\n\r\n    return searched.sort((a, b) => {\r\n      const pa =\r\n        (a.price_tiers || []).find((x) => x.pax === pax && x.audience === audience) ||\r\n        (a.price_tiers || []).find((x) => x.pax === pax) ||\r\n        (a.price_tiers || [])[0];\r\n      const pb =\r\n        (b.price_tiers || []).find((x) => x.pax === pax && x.audience === audience) ||\r\n        (b.price_tiers || []).find((x) => x.pax === pax) ||\r\n        (b.price_tiers || [])[0];\r\n      return (pa?.price_idr || 0) - (pb?.price_idr || 0);\r\n    });\r\n  }, [data, query, pax, sortBy, audience, locale]);\r\n\r\n  return (\r\n    <div className=\"container mt-2 space-y-5\">\r\n      {/* Sticky glass toolbar */}\r\n      <motion.div\r\n        style={{ height: barH, boxShadow: barShadow }}\r\n        className=\"sticky top-16 z-[5] rounded-2xl border border-slate-200/60 dark:border-slate-800/60 backdrop-blur-md px-3 sm:px-4 flex items-center\"\r\n      >\r\n        <motion.div className=\"absolute inset-0 rounded-2xl\" style={{ background: barBg }} />\r\n        <motion.div className=\"absolute inset-0 rounded-2xl hidden dark:block\" style={{ background: barBgDark }} />\r\n        <div className=\"relative w-full flex flex-wrap items-center gap-2 sm:gap-3\">\r\n          <h1 className=\"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100 pr-2\">\r\n            {t(\"explore.title\")}\r\n          </h1>\r\n\r\n          <div className=\"flex-1 min-w-[160px]\">\r\n            <div className=\"relative\">\r\n              <input\r\n                type=\"text\"\r\n                value={query}\r\n                onChange={(e) => setQuery(e.target.value)}\r\n                placeholder={t(\"explore.searchPlaceholder\", { defaultValue: \"Search packages or spots…\" })}\r\n                className=\"w-full pl-9 pr-3 py-2 rounded-2xl border-slate-200 dark:border-slate-700\"\r\n              />\r\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\">🔎</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Audience */}\r\n          <div className=\"flex items-center gap-1 bg-white/60 dark:bg-slate-900/50 border border-slate-200/60 dark:border-slate-700/60 rounded-2xl p-1\">\r\n            {[\"domestic\", \"foreign\"].map((k) => (\r\n              <button\r\n                key={k}\r\n                onClick={() => setAudience(k)}\r\n                className={`btn ${audience === k ? \"btn-primary\" : \"btn-outline\"} !py-1 !px-2 text-xs`}\r\n              >\r\n                {k === \"domestic\" ? t(\"explore.domestic\", { defaultValue: \"Domestik\" }) : \"Foreign\"}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Pax */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <label htmlFor=\"pax\" className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n              {t(\"home.calcFor\")}\r\n            </label>\r\n            <select id=\"pax\" value={pax} onChange={(e) => setPax(parseInt(e.target.value))} className=\"px-3 py-2 rounded-2xl\">\r\n              {[1, 2, 3, 4, 5, 6].map((n) => (\r\n                <option key={n} value={n}>\r\n                  {n} {t(\"home.pax\")}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Sort + density */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <select value={sortBy} onChange={(e) => setSortBy(e.target.value)} className=\"px-3 py-2 rounded-2xl\">\r\n              <option value=\"price\">{t(\"explore.sortPrice\", { defaultValue: \"Termurah\" })}</option>\r\n              <option value=\"name\">{t(\"explore.sortName\", { defaultValue: \"A-Z\" })}</option>\r\n            </select>\r\n            <button className=\"btn btn-outline !py-2 !px-3\" onClick={() => setCompact((v) => !v)} title={compact ? \"Cozy grid\" : \"Compact grid\"}>\r\n              {compact ? \"🔳\" : \"🔲\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Grid */}\r\n      <motion.div variants={listVariants} initial=\"hidden\" animate=\"show\" className={`grid gap-4 ${compact ? \"sm:grid-cols-3\" : \"md:grid-cols-2\"}`}>\r\n        {filtered.map((p) => {\r\n          const loc = normalizeLocale(p, locale?.slice(0, 2));\r\n          const isOpen = openId === p.id;\r\n          return (\r\n            <PackageCard\r\n              key={p.id}\r\n              p={p}\r\n              loc={loc}\r\n              audience={audience}\r\n              pax={pax}\r\n              setPax={setPax}\r\n              currency={currency}\r\n              fx={fx}\r\n              locale={locale}\r\n              isOpen={isOpen}\r\n              onToggle={() => setOpenId(isOpen ? null : p.id)}\r\n              onRegisterRef={registerRef}\r\n              addItem={addItem}\r\n              t={t}\r\n            />\r\n          );\r\n        })}\r\n      </motion.div>\r\n\r\n      {/* Empty state */}\r\n      {!filtered.length && (\r\n        <div className=\"text-center text-slate-500 dark:text-slate-400 py-16\">\r\n          {t(\"explore.empty\", { defaultValue: \"No packages match your filters.\" })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;;;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnE,SAASC,cAAc,QAAQ,eAAe;AAC9C,SAASC,eAAe,EAAEC,MAAM,EAAEC,SAAS,EAAEC,YAAY,QAAQ,eAAe;AAChF,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,WAAW,MAAM,sBAAsB;AAC9C,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,kBAAkB,QAAQ,mBAAmB;AACtD,SAASC,QAAQ,EAAEC,KAAK,EAAEC,UAAU,EAAEC,IAAI,EAAEC,MAAM,EAAEC,GAAG,QAAQ,cAAc;;AAE7E;AACA;AACA;AAFA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAGA,MAAMC,YAAY,GAAG;EACnBC,MAAM,EAAE;IAAEC,OAAO,EAAE;EAAE,CAAC;EACtBC,IAAI,EAAE;IAAED,OAAO,EAAE,CAAC;IAAEE,UAAU,EAAE;MAAEC,eAAe,EAAE,IAAI;MAAEC,aAAa,EAAE;IAAK;EAAE;AACjF,CAAC;AACD,MAAMC,YAAY,GAAG;EACnBN,MAAM,EAAE;IAAEC,OAAO,EAAE,CAAC;IAAEM,CAAC,EAAE;EAAG,CAAC;EAC7BL,IAAI,EAAE;IAAED,OAAO,EAAE,CAAC;IAAEM,CAAC,EAAE,CAAC;IAAEJ,UAAU,EAAE;MAAEK,QAAQ,EAAE,IAAI;MAAEC,IAAI,EAAE;IAAU;EAAE;AAC5E,CAAC;;AAED;AACA;AACA;AACA,SAASC,WAAWA,CAACC,CAAC,EAAE;EAAA,IAAAC,OAAA;EACtB,MAAMC,GAAG,GACP,CAAAF,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEG,aAAa,MAChBH,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEI,SAAS,MACZJ,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEK,SAAS,MACZL,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEM,SAAS,MACZN,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEO,SAAS,KACXC,KAAK,CAACC,OAAO,CAACT,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEU,MAAM,CAAC,IAAIV,CAAC,CAACU,MAAM,CAAC,CAAC,CAAE,IACxC,CAAAV,CAAC,aAADA,CAAC,wBAAAC,OAAA,GAADD,CAAC,CAAEW,IAAI,cAAAV,OAAA,uBAAPA,OAAA,CAASS,MAAM,KAAIV,CAAC,CAACW,IAAI,CAACD,MAAM,CAAC,CAAC,CAAE,IACrC,EAAE;EACJ,IAAI,CAACR,GAAG,EAAE,OAAO,SAAS;EAC1B,IAAI,eAAe,CAACU,IAAI,CAACV,GAAG,CAAC,EAAE,OAAOA,GAAG;EACzC,OAAOA,GAAG,CAACW,UAAU,CAAC,GAAG,CAAC,GAAGX,GAAG,GAAG,IAAIA,GAAG,EAAE;AAC9C;AAEA,SAASY,cAAcA,CAACd,CAAC,EAAE;EAAA,IAAAe,QAAA;EACzB,MAAMC,IAAI,GAAG,IAAIC,GAAG,CAAC,CAAC;EACtB,MAAMC,IAAI,GAAIC,CAAC,IAAK;IAClB,IAAI,CAACA,CAAC,EAAE;IACR,MAAMC,CAAC,GAAGC,MAAM,CAACF,CAAC,CAAC;IACnB,MAAMG,KAAK,GAAG,eAAe,CAACV,IAAI,CAACQ,CAAC,CAAC,GAAGA,CAAC,GAAGA,CAAC,CAACP,UAAU,CAAC,GAAG,CAAC,GAAGO,CAAC,GAAG,IAAIA,CAAC,EAAE;IAC3EJ,IAAI,CAACO,GAAG,CAACD,KAAK,CAAC;EACjB,CAAC;EACDJ,IAAI,CAAClB,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEG,aAAa,CAAC;EACtB,IAAIK,KAAK,CAACC,OAAO,CAACT,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEU,MAAM,CAAC,EAAEV,CAAC,CAACU,MAAM,CAACc,OAAO,CAACN,IAAI,CAAC;EACpD,IAAIV,KAAK,CAACC,OAAO,CAACT,CAAC,aAADA,CAAC,wBAAAe,QAAA,GAADf,CAAC,CAAEW,IAAI,cAAAI,QAAA,uBAAPA,QAAA,CAASL,MAAM,CAAC,EAAEV,CAAC,CAACW,IAAI,CAACD,MAAM,CAACc,OAAO,CAACN,IAAI,CAAC;EAC/D,IAAIlB,CAAC,aAADA,CAAC,eAADA,CAAC,CAAEI,SAAS,EAAEc,IAAI,CAAClB,CAAC,CAACI,SAAS,CAAC;EACnC,IAAIJ,CAAC,aAADA,CAAC,eAADA,CAAC,CAAEM,SAAS,EAAEY,IAAI,CAAClB,CAAC,CAACM,SAAS,CAAC;EACnC,OAAOE,KAAK,CAACiB,IAAI,CAACT,IAAI,CAAC,CAACU,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AACrC;AAEA,SAASC,eAAeA,CAAC3B,CAAC,EAAE4B,WAAW,EAAE;EAAA,IAAAC,UAAA;EACvC,MAAMC,KAAK,GAAG,CAAA9B,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAE+B,MAAM,MAAKvB,KAAK,CAACC,OAAO,CAACT,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEgC,OAAO,CAAC,GAAGhC,CAAC,CAACgC,OAAO,CAACC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKP,WAAW,CAAC,GAAG,IAAI,CAAC;EAC7G,OAAOE,KAAK,KAAI9B,CAAC,aAADA,CAAC,wBAAA6B,UAAA,GAAD7B,CAAC,CAAEgC,OAAO,cAAAH,UAAA,uBAAVA,UAAA,CAAa,CAAC,CAAC,KAAI,CAAC,CAAC;AACvC;AAEA,SAASO,iBAAiBA,CAAC;EAAEzB;AAAK,CAAC,EAAE;EACnC,MAAM0B,KAAK,GAAG7B,KAAK,CAACC,OAAO,CAACE,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE;EAC7C,IAAI,CAAC0B,KAAK,CAACC,MAAM,EAAE,OAAO,IAAI;EAC9B,oBACErD,OAAA;IAAIsD,SAAS,EAAC,8EAA8E;IAAAC,QAAA,EACzFH,KAAK,CAACI,GAAG,CAAC,CAACC,IAAI,EAAEC,CAAC,KAAK;MAAA,IAAAC,UAAA,EAAAC,UAAA;MACtB,MAAMC,KAAK,GAAGJ,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ;MAC9C,MAAMK,IAAI,GAAG1B,MAAM,CAACyB,KAAK,IAAAF,UAAA,GAAGF,IAAI,CAACK,IAAI,cAAAH,UAAA,cAAAA,UAAA,GAAI,EAAE,GAAG,EAAE,CAAC,CAACI,IAAI,CAAC,CAAC;MACxD,MAAMC,IAAI,GAAG5B,MAAM,CAACyB,KAAK,IAAAD,UAAA,GAAGH,IAAI,CAACO,IAAI,cAAAJ,UAAA,cAAAA,UAAA,GAAI,EAAE,GAAGH,IAAI,CAAC,CAACM,IAAI,CAAC,CAAC;MAE1D,oBACE/D,OAAA;QAAYsD,SAAS,EAAC,UAAU;QAAAC,QAAA,gBAC9BvD,OAAA;UAAMsD,SAAS,EAAC;QAAsG;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACzHpE,OAAA;UAAKsD,SAAS,EAAC,wBAAwB;UAAAC,QAAA,GACpCO,IAAI,iBACH9D,OAAA;YAAMsD,SAAS,EAAC,iHAAiH;YAAAC,QAAA,EAC9HO;UAAI;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CACP,eACDpE,OAAA;YAAGsD,SAAS,EAAC,yBAAyB;YAAAC,QAAA,EAAES;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC;MAAA,GATCV,CAAC;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAUN,CAAC;IAET,CAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAET;AAACC,EAAA,GA1BQlB,iBAAiB;AA4B1B,SAASmB,QAAQA,CAAC;EAAEC;AAAM,CAAC,EAAE;EAC3B,MAAMC,GAAG,GAAGjD,KAAK,CAACC,OAAO,CAAC+C,KAAK,CAAC,GAAGA,KAAK,GAAG,EAAE;EAC7C,IAAI,CAACC,GAAG,CAACnB,MAAM,EAAE,OAAO,IAAI;EAC5B,oBACErD,OAAA;IAAKsD,SAAS,EAAC,2BAA2B;IAAAC,QAAA,EACvCiB,GAAG,CAAChB,GAAG,CAAC,CAACrB,CAAC,EAAEuB,CAAC,kBACZ1D,OAAA;MAEEsD,SAAS,EAAC,4JAA4J;MAAAC,QAAA,EAErK,OAAOpB,CAAC,KAAK,QAAQ,GAAGA,CAAC,GAAGsC,IAAI,CAACC,SAAS,CAACvC,CAAC;IAAC,GAHzCuB,CAAC;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAIF,CACP;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;;AAEA;AACA;AACA;AAFAO,GAAA,GAjBSL,QAAQ;AAoBjB,SAASM,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACpB,MAAMC,GAAG,GAAGjG,MAAM,CAAC,IAAI,CAAC;EACxBF,SAAS,CAAC,MAAM;IACd,MAAMoG,EAAE,GAAGD,GAAG,CAACE,OAAO;IACtB,IAAI,CAACD,EAAE,EAAE;IACT,IAAIE,GAAG,GAAG,CAAC;IACX,MAAMC,GAAG,GAAG,CAAC;IACb,MAAMC,MAAM,GAAIC,CAAC,IAAK;MACpB,MAAMC,IAAI,GAAGN,EAAE,CAACO,qBAAqB,CAAC,CAAC;MACvC,MAAMC,EAAE,GAAG,CAACH,CAAC,CAACI,OAAO,GAAGH,IAAI,CAACI,IAAI,IAAIJ,IAAI,CAACK,KAAK,GAAG,GAAG;MACrD,MAAMC,EAAE,GAAG,CAACP,CAAC,CAACQ,OAAO,GAAGP,IAAI,CAACQ,GAAG,IAAIR,IAAI,CAACS,MAAM,GAAG,GAAG;MACrDC,oBAAoB,CAACd,GAAG,CAAC;MACzBA,GAAG,GAAGe,qBAAqB,CAAC,MAAM;QAChCjB,EAAE,CAACkB,KAAK,CAACC,SAAS,GAAG,+BAA+B,CAAC,CAACP,EAAE,GAAGT,GAAG,EAAEiB,OAAO,CAAC,CAAC,CAAC,gBAAgB,CAACZ,EAAE,GAAGL,GAAG,EAAEiB,OAAO,CAC1G,CACF,CAAC,MAAM;MACT,CAAC,CAAC;IACJ,CAAC;IACD,MAAMC,KAAK,GAAGA,CAAA,KAAM;MAClBL,oBAAoB,CAACd,GAAG,CAAC;MACzBF,EAAE,CAACkB,KAAK,CAACC,SAAS,GAAG,iDAAiD;IACxE,CAAC;IACDnB,EAAE,CAACsB,gBAAgB,CAAC,WAAW,EAAElB,MAAM,CAAC;IACxCJ,EAAE,CAACsB,gBAAgB,CAAC,YAAY,EAAED,KAAK,CAAC;IACxC,OAAO,MAAM;MACXrB,EAAE,CAACuB,mBAAmB,CAAC,WAAW,EAAEnB,MAAM,CAAC;MAC3CJ,EAAE,CAACuB,mBAAmB,CAAC,YAAY,EAAEF,KAAK,CAAC;MAC3CL,oBAAoB,CAACd,GAAG,CAAC;IAC3B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,OAAOH,GAAG;AACZ;;AAEA;AACA;AACA;AAFAD,EAAA,CAjCSD,UAAU;AAoCnB,MAAM2B,YAAY,GAAGA,CAAC;EAAEC,IAAI,EAAEC,IAAI;EAAElD;AAAS,CAAC,kBAC5CvD,OAAA;EAAKsD,SAAS,EAAC,8BAA8B;EAAAC,QAAA,GAC1CkD,IAAI,iBAAIzG,OAAA,CAACyG,IAAI;IAACC,IAAI,EAAE,EAAG;IAACpD,SAAS,EAAC;EAAgC;IAAAW,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,eACtEpE,OAAA;IAAIsD,SAAS,EAAC,aAAa;IAAAC,QAAA,EAAEA;EAAQ;IAAAU,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AAAA;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACxC,CACN;AAACuC,GAAA,GALIJ,YAAY;AAOlB,SAASK,UAAUA,CAAC;EAAEC,QAAQ;EAAEC,GAAG;EAAEC;AAAW,CAAC,EAAE;EACjD,oBACE/G,OAAA;IAAKsD,SAAS,EAAC,6BAA6B;IAAAC,QAAA,gBAC1CvD,OAAA;MAAKsD,SAAS,EAAC,gFAAgF;MAAAC,QAAA,gBAC7FvD,OAAA;QAAKsD,SAAS,EAAC,4BAA4B;QAAAC,QAAA,EAAC;MAAQ;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC1DpE,OAAA;QAAKsD,SAAS,EAAC,uBAAuB;QAAAC,QAAA,EAAEsD,QAAQ,KAAK,UAAU,GAAG,UAAU,GAAG;MAAS;QAAA5C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5F,CAAC,eACNpE,OAAA;MAAKsD,SAAS,EAAC,gFAAgF;MAAAC,QAAA,gBAC7FvD,OAAA;QAAKsD,SAAS,EAAC,4BAA4B;QAAAC,QAAA,EAAC;MAAG;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACrDpE,OAAA;QAAKsD,SAAS,EAAC,uBAAuB;QAAAC,QAAA,EAAEuD;MAAG;QAAA7C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CAAC,eACNpE,OAAA;MAAKsD,SAAS,EAAC,gFAAgF;MAAAC,QAAA,gBAC7FvD,OAAA;QAAKsD,SAAS,EAAC,4BAA4B;QAAAC,QAAA,EAAC;MAAK;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACvDpE,OAAA;QAAKsD,SAAS,EAAC,uBAAuB;QAAAC,QAAA,EAAEwD;MAAU;QAAA9C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC4C,GAAA,GAjBQJ,UAAU;AAmBnB,SAASK,SAASA,CAAC;EAAEC,KAAK;EAAEC,QAAQ;EAAEC,EAAE;EAAEtE,MAAM;EAAEgE,GAAG;EAAEO,SAAS;EAAEC;AAAE,CAAC,EAAE;EACrE,MAAMC,WAAW,GAAG,CAACL,KAAK,IAAI,EAAE,EAAEzE,KAAK,CAAC,CAAC,CAAC+E,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACX,GAAG,GAAGY,CAAC,CAACZ,GAAG,CAAC;EACvE,IAAI,CAACS,WAAW,CAAClE,MAAM,EAAE,OAAO,IAAI;EACpC,oBACErD,OAAA,CAAAE,SAAA;IAAAqD,QAAA,gBACEvD,OAAA,CAACuG,YAAY;MAACC,IAAI,EAAE7G,UAAW;MAAA4D,QAAA,EAAE+D,CAAC,CAAC,gBAAgB;IAAC;MAAArD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAe,CAAC,eACpEpE,OAAA;MAAKsD,SAAS,EAAC,4CAA4C;MAAAC,QAAA,EACxDgE,WAAW,CAAC/D,GAAG,CAAEmE,EAAE,IAAK;QACvB,MAAMC,MAAM,GAAGD,EAAE,CAACb,GAAG,KAAKA,GAAG;QAC7B,oBACE9G,OAAA;UAEE6H,OAAO,EAAEA,CAAA,KAAMR,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAGM,EAAE,CAACb,GAAG,CAAE;UACnCxD,SAAS,EACP,mDAAmD,IAClDsE,MAAM,GACH,6CAA6C,GAC7C,qFAAqF,CAC1F;UAAArE,QAAA,gBAEDvD,OAAA;YAAKsD,SAAS,EAAC,4BAA4B;YAAAC,QAAA,GACxCoE,EAAE,CAACb,GAAG,EAAC,GAAC,EAACQ,CAAC,CAAC,UAAU,CAAC;UAAA;YAAArD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpB,CAAC,eACNpE,OAAA;YAAKsD,SAAS,EAAC,uBAAuB;YAAAC,QAAA,EACnC/D,kBAAkB,CAACmI,EAAE,CAACG,SAAS,EAAEX,QAAQ,EAAEC,EAAE,EAAEtE,MAAM;UAAC;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpD,CAAC;QAAA,GAdDuD,EAAE,CAACb,GAAG;UAAA7C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAeL,CAAC;MAEb,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA,eACN,CAAC;AAEP;AAAC2D,GAAA,GAhCQd,SAAS;AAkClB,SAASe,WAAWA,CAAC;EAAEzD;AAAM,CAAC,EAAE;EAC9B,MAAMC,GAAG,GAAGjD,KAAK,CAACC,OAAO,CAAC+C,KAAK,CAAC,GAAGA,KAAK,GAAG,EAAE;EAC7C,IAAI,CAACC,GAAG,CAACnB,MAAM,EAAE,OAAO,IAAI;EAC5B,oBACErD,OAAA;IAAKsD,SAAS,EAAC,4CAA4C;IAAAC,QAAA,EACxDiB,GAAG,CAAChB,GAAG,CAAC,CAACrB,CAAC,EAAEuB,CAAC,kBACZ1D,OAAA;MAAasD,SAAS,EAAC,wBAAwB;MAAAC,QAAA,gBAC7CvD,OAAA,CAACN,KAAK;QAACgH,IAAI,EAAE,EAAG;QAACpD,SAAS,EAAC;MAAwD;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACtFpE,OAAA;QAAMsD,SAAS,EAAC,SAAS;QAAAC,QAAA,EAAE,OAAOpB,CAAC,KAAK,QAAQ,GAAGA,CAAC,GAAGsC,IAAI,CAACC,SAAS,CAACvC,CAAC;MAAC;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA,GAFxEV,CAAC;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAGN,CACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAAC6D,GAAA,GAbQD,WAAW;AAepB,SAASE,YAAYA,CAAC;EAAEzG;AAAO,CAAC,EAAE;EAChC,IAAI,EAACA,MAAM,aAANA,MAAM,eAANA,MAAM,CAAE4B,MAAM,GAAE,OAAO,IAAI;EAChC,oBACErD,OAAA;IAAKsD,SAAS,EAAC,sBAAsB;IAAAC,QAAA,eACnCvD,OAAA;MAAKsD,SAAS,EAAC,mBAAmB;MAAAC,QAAA,EAC/B9B,MAAM,CAAC+B,GAAG,CAAC,CAAC2E,GAAG,EAAEzE,CAAC,kBACjB1D,OAAA;QAAasD,SAAS,EAAC,qBAAqB;QAAAC,QAAA,eAC1CvD,OAAA;UACEmI,GAAG,EAAEA,GAAI;UACTC,GAAG,EAAC,EAAE;UACNC,OAAO,EAAC,MAAM;UACd/E,SAAS,EAAC;QAAiF;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5F;MAAC,GANMV,CAAC;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAON,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;;AAEA;AACA;AACA;AAFAkE,GAAA,GApBSJ,YAAY;AAuBrB,SAASK,WAAWA,CAAC;EACnBxH,CAAC;EACDyH,GAAG;EACH3B,QAAQ;EACRC,GAAG;EACH2B,MAAM;EACNtB,QAAQ;EACRC,EAAE;EACFtE,MAAM;EACN4F,MAAM;EACNC,QAAQ;EACRC,aAAa;EACbC,OAAO;EACPvB;AACF,CAAC,EAAE;EAAAwB,GAAA;EAAA,IAAAC,UAAA,EAAAC,cAAA,EAAAC,cAAA,EAAAC,YAAA;EACD,MAAMC,KAAK,GAAGrI,WAAW,CAACC,CAAC,CAAC;EAC5B,MAAMqI,OAAO,GAAGvH,cAAc,CAACd,CAAC,CAAC;EACjC,MAAMsI,OAAO,GAAGzE,UAAU,CAAC,CAAC;EAE5B,MAAM0E,QAAQ,GAAG,CAACvI,CAAC,CAACwI,WAAW,IAAI,EAAE,EAAEC,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAAC5C,QAAQ,KAAKA,QAAQ,CAAC;EAC7E,MAAM6C,kBAAkB,GACtBJ,QAAQ,CAACtG,IAAI,CAAEyG,CAAC,IAAKA,CAAC,CAAC3C,GAAG,KAAKA,GAAG,CAAC,IACnC,CAAC/F,CAAC,CAACwI,WAAW,IAAI,EAAE,EAAEvG,IAAI,CAAEyG,CAAC,IAAKA,CAAC,CAAC3C,GAAG,KAAKA,GAAG,CAAC,IAChDwC,QAAQ,CAAC,CAAC,CAAC,IACX,CAACvI,CAAC,CAACwI,WAAW,IAAI,EAAE,EAAE,CAAC,CAAC;EAC1B,MAAMI,aAAa,GAAG,CAAAD,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAE5B,SAAS,KAAI,CAAC;EAExD,oBACE9H,OAAA,CAACf,MAAM,CAAC2K,OAAO;IACbC,QAAQ,EAAEnJ,YAAa;IACvBoE,GAAG,EAAGC,EAAE,IAAK6D,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAG7H,CAAC,CAAC+I,EAAE,EAAE/E,EAAE,CAAE;IACvC+E,EAAE,EAAE,OAAO/I,CAAC,CAAC+I,EAAE,EAAG;IAClBxG,SAAS,EAAC,6DAA6D;IAAAC,QAAA,gBAGvEvD,OAAA;MAAKsD,SAAS,EAAC,UAAU;MAAAC,QAAA,eACvBvD,OAAA;QAAK8E,GAAG,EAAEuE,OAAQ;QAAC/F,SAAS,EAAC,4EAA4E;QAAAC,QAAA,gBACvGvD,OAAA;UACEmI,GAAG,EAAEgB,KAAM;UACXf,GAAG,EAAC,EAAE;UACNC,OAAO,EAAC,MAAM;UACd/E,SAAS,EAAC,sDAAsD;UAChEyG,MAAM,EAAG3E,CAAC,IAAKA,CAAC,CAAC4E,aAAa,CAACC,SAAS,CAAC3H,GAAG,CAAC,UAAU;QAAE;UAAA2B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,eACFpE,OAAA;UAAKsD,SAAS,EAAC;QAAoJ;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACtKpE,OAAA;UAAKsD,SAAS,EAAC,+IAA+I;UAAAC,QAAA,eAC5JvD,OAAA;YAAKsD,SAAS,EAAC,gDAAgD;YAAAC,QAAA,gBAC7DvD,OAAA;cAAAuD,QAAA,gBACEvD,OAAA;gBAAIsD,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAE,CAAAiF,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE0B,KAAK,KAAInJ,CAAC,CAACoJ;cAAI;gBAAAlG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjEpE,OAAA;gBAAGsD,SAAS,EAAC,6DAA6D;gBAAAC,QAAA,EACvE,CAAC,CAAAiF,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE4B,KAAK,KAAI,EAAE,EAAE3H,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC4H,IAAI,CAAC,KAAK;cAAC;gBAAApG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1C,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eACNpE,OAAA;cAAKsD,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzBvD,OAAA;gBAAGsD,SAAS,EAAC,+CAA+C;gBAAAC,QAAA,GACzD/D,kBAAkB,CAACmK,aAAa,EAAExC,QAAQ,EAAEC,EAAE,EAAEtE,MAAM,CAAC,EAAE,GAAG,eAC7D9C,OAAA;kBAAMsD,SAAS,EAAC,wDAAwD;kBAAAC,QAAA,GAAC,IAAE,EAAC+D,CAAC,CAAC,aAAa,CAAC;gBAAA;kBAAArD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnG,CAAC,eACJpE,OAAA;gBAAKsD,SAAS,EAAC,gDAAgD;gBAAAC,QAAA,GAC5DsD,QAAQ,KAAK,UAAU,GAAG,UAAU,GAAG,SAAS,EAAC,UAAG,EAACC,GAAG,EAAC,GAAC,EAACQ,CAAC,CAAC,UAAU,CAAC;cAAA;gBAAArD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNpE,OAAA;MAAKsD,SAAS,EAAC,mDAAmD;MAAAC,QAAA,gBAChEvD,OAAA;QAAQ6H,OAAO,EAAEc,QAAS;QAACrF,SAAS,EAAC,WAAW;QAAAC,QAAA,EAC7CmF,MAAM,GAAGpB,CAAC,CAAC,oBAAoB,EAAE;UAAEgD,YAAY,EAAE;QAAc,CAAC,CAAC,GAAGhD,CAAC,CAAC,mBAAmB,EAAE;UAAEgD,YAAY,EAAE;QAAa,CAAC;MAAC;QAAArG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrH,CAAC,eAETpE,OAAA;QAAKsD,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACtCvD,OAAA;UAAQuK,KAAK,EAAEzD,GAAI;UAAC0D,QAAQ,EAAGpF,CAAC,IAAKqD,MAAM,CAACgC,QAAQ,CAACrF,CAAC,CAACsF,MAAM,CAACH,KAAK,CAAC,CAAE;UAACjH,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EACrG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACC,GAAG,CAAEmH,CAAC,iBACxB3K,OAAA;YAAgBuK,KAAK,EAAEI,CAAE;YAAApH,QAAA,GACtBoH,CAAC,EAAC,GAAC,EAACrD,CAAC,CAAC,UAAU,CAAC;UAAA,GADPqD,CAAC;YAAA1G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAEN,CACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI,CAAC,eACTpE,OAAA,CAACf,MAAM,CAAC2L,MAAM;UACZtH,SAAS,EAAC,uBAAuB;UACjCuH,QAAQ,EAAE;YAAEC,KAAK,EAAE;UAAK,CAAE;UAC1BjD,OAAO,EAAEA,CAAA,KAAM;YAAA,IAAAkD,KAAA;YACb;YACAlC,OAAO,CAAC;cACNiB,EAAE,EAAE/I,CAAC,CAAC+I,EAAE;cACRI,KAAK,EAAE,CAAA1B,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE0B,KAAK,KAAInJ,CAAC,CAACoJ,IAAI;cAC3Ba,KAAK,EACH,EAAAD,KAAA,IAAChK,CAAC,CAACwI,WAAW,IAAI,EAAE,EAAEvG,IAAI,CAAEyG,CAAC,IAAKA,CAAC,CAAC3C,GAAG,KAAKA,GAAG,IAAI2C,CAAC,CAAC5C,QAAQ,KAAKA,QAAQ,CAAC,cAAAkE,KAAA,uBAA3EA,KAAA,CAA6EjD,SAAS,KACtF6B,aAAa;cACf7C,GAAG;cACHmE,GAAG,EAAE,CAAC;cACNpE;YACF,CAAC,CAAC;YACF;YACAqE,MAAM,CAACC,aAAa,CAAC,IAAIC,WAAW,CAAC,aAAa,CAAC,CAAC;UACtD,CAAE;UAAA7H,QAAA,EAED+D,CAAC,CAAC,gBAAgB,EAAE;YAAEgD,YAAY,EAAE;UAAc,CAAC,CAAC,CAACe,OAAO,CAAC,iBAAiB,EAAE,UAAU;QAAC;UAAApH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/E,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNpE,OAAA,CAAChB,eAAe;MAACsM,OAAO,EAAE,KAAM;MAAA/H,QAAA,EAC7BmF,MAAM,iBACL1I,OAAA,CAACf,MAAM,CAACsM,GAAG;QAETD,OAAO,EAAE;UAAExF,MAAM,EAAE,CAAC;UAAEzF,OAAO,EAAE;QAAE,CAAE;QACnCmL,OAAO,EAAE;UAAE1F,MAAM,EAAE,MAAM;UAAEzF,OAAO,EAAE;QAAE,CAAE;QACxCoL,IAAI,EAAE;UAAE3F,MAAM,EAAE,CAAC;UAAEzF,OAAO,EAAE;QAAE,CAAE;QAChCE,UAAU,EAAE;UAAEmL,IAAI,EAAE,QAAQ;UAAEC,SAAS,EAAE,GAAG;UAAEC,OAAO,EAAE;QAAG,CAAE;QAC5DtI,SAAS,EAAC,WAAW;QAAAC,QAAA,gBAGrBvD,OAAA,CAACuG,YAAY;UAACC,IAAI,EAAE1G,GAAI;UAAAyD,QAAA,EAAE,CAAAiF,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEqD,OAAO,KAAI;QAAY;UAAA5H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAe,CAAC,eACtEpE,OAAA,CAACkI,YAAY;UAACzG,MAAM,EAAE2H;QAAQ;UAAAnF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAGjCpE,OAAA,CAAC4G,UAAU;UACTC,QAAQ,EAAEA,QAAS;UACnBC,GAAG,EAAEA,GAAI;UACTC,UAAU,EAAEvH,kBAAkB,CAACmK,aAAa,EAAExC,QAAQ,EAAEC,EAAE,EAAEtE,MAAM;QAAE;UAAAmB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrE,CAAC,eAEFpE,OAAA;UAAKsD,SAAS,EAAC,gCAAgC;UAAAC,QAAA,gBAE7CvD,OAAA;YAAAuD,QAAA,GACG,CAAC,CAAAiF,GAAG,aAAHA,GAAG,wBAAAO,UAAA,GAAHP,GAAG,CAAE4B,KAAK,cAAArB,UAAA,uBAAVA,UAAA,CAAY1F,MAAM,KAAI,CAAC,IAAI,CAAC,iBAC5BrD,OAAA,CAAAE,SAAA;cAAAqD,QAAA,gBACEvD,OAAA,CAACuG,YAAY;gBAACC,IAAI,EAAE3G,MAAO;gBAAA0D,QAAA,EAAE+D,CAAC,CAAC,eAAe;cAAC;gBAAArD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAe,CAAC,eAC/DpE,OAAA,CAACsE,QAAQ;gBAACC,KAAK,EAAEiE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAE4B;cAAM;gBAAAnG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA,eAC/B,CACH,EAEA,CAAC,CAAAoE,GAAG,aAAHA,GAAG,wBAAAQ,cAAA,GAAHR,GAAG,CAAEsD,SAAS,cAAA9C,cAAA,uBAAdA,cAAA,CAAgB3F,MAAM,KAAI,CAAC,IAAI,CAAC,iBAChCrD,OAAA,CAAAE,SAAA;cAAAqD,QAAA,gBACEvD,OAAA,CAACuG,YAAY;gBAACC,IAAI,EAAE/G,QAAS;gBAAA8D,QAAA,EAAE+D,CAAC,CAAC,mBAAmB,EAAE;kBAAEgD,YAAY,EAAE;gBAAY,CAAC;cAAC;gBAAArG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAe,CAAC,eACpGpE,OAAA,CAACmD,iBAAiB;gBAACzB,IAAI,EAAE8G,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEsD;cAAU;gBAAA7H,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA,eAC3C,CACH;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAGNpE,OAAA;YAAAuD,QAAA,GACG,CAAC,EAAA0F,cAAA,GAAAlI,CAAC,CAACwI,WAAW,cAAAN,cAAA,uBAAbA,cAAA,CAAe5F,MAAM,KAAI,CAAC,IAAI,CAAC,iBAC/BrD,OAAA,CAACiH,SAAS;cACRC,KAAK,EAAE,CAACnG,CAAC,CAACwI,WAAW,IAAI,EAAE,EAAEC,MAAM,CAAE7B,EAAE,IAAKA,EAAE,CAACd,QAAQ,KAAKA,QAAQ,CAAE;cACtEM,QAAQ,EAAEA,QAAS;cACnBC,EAAE,EAAEA,EAAG;cACPtE,MAAM,EAAEA,MAAO;cACfgE,GAAG,EAAEA,GAAI;cACTO,SAAS,EAAGsD,CAAC,IAAKlC,MAAM,CAACkC,CAAC,CAAE;cAC5BrD,CAAC,EAAEA;YAAE;cAAArD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CACF,EAEA,CAAC,CAAAoE,GAAG,aAAHA,GAAG,wBAAAU,YAAA,GAAHV,GAAG,CAAEuD,OAAO,cAAA7C,YAAA,uBAAZA,YAAA,CAAc7F,MAAM,KAAI,CAAC,IAAI,CAAC,iBAC9BrD,OAAA,CAAAE,SAAA;cAAAqD,QAAA,gBACEvD,OAAA,CAACuG,YAAY;gBAACC,IAAI,EAAE9G,KAAM;gBAAA6D,QAAA,EAAE+D,CAAC,CAAC,kBAAkB;cAAC;gBAAArD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAe,CAAC,eACjEpE,OAAA,CAACgI,WAAW;gBAACzD,KAAK,EAAEiE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEuD;cAAQ;gBAAA9H,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA,eACpC,CACH,EAEA,CAAAoE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEwD,IAAI,kBACRhM,OAAA;cAAKsD,SAAS,EAAC,8EAA8E;cAAAC,QAAA,gBAC3FvD,OAAA,CAACJ,IAAI;gBAAC8G,IAAI,EAAE,EAAG;gBAACpD,SAAS,EAAC;cAAqB;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAClDpE,OAAA;gBAAGsD,SAAS,EAAC,4CAA4C;gBAAAC,QAAA,EAAEiF,GAAG,CAACwD;cAAI;gBAAA/H,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrE,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA,GAhEF,QAAQ;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAiEF;IACb;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACc,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAErB;;AAEA;AACA;AACA;AAFA0E,GAAA,CArLSP,WAAW;EAAA,QAiBF3D,UAAU;AAAA;AAAAqH,GAAA,GAjBnB1D,WAAW;AAwLpB,eAAe,SAAS2D,OAAOA,CAAA,EAAG;EAAAC,GAAA;EAAA,IAAAC,eAAA,EAAAC,gBAAA;EAChC,MAAM;IAAE/E;EAAE,CAAC,GAAGvI,cAAc,CAAC,CAAC;EAC9B,MAAM;IAAEuN,IAAI,EAAE5K,IAAI,GAAG;EAAG,CAAC,GAAGrC,WAAW,CAAC,CAAC;EACzC,MAAM;IAAE+H,EAAE;IAAED,QAAQ;IAAErE;EAAO,CAAC,GAAGxD,WAAW,CAAC,CAAC;EAC9C,MAAM;IAAEuJ;EAAQ,CAAC,GAAGtJ,OAAO,CAAC,CAAC;EAE7B,MAAMgN,QAAQ,GAAGnN,WAAW,CAAC,CAAC;EAC9B,MAAMoN,EAAE,GAAG,IAAIC,eAAe,CAACF,QAAQ,CAACG,MAAM,CAAC;EAC/C,MAAMC,WAAW,GAAG,EAAAP,eAAA,GAAAG,QAAQ,CAACK,KAAK,cAAAR,eAAA,uBAAdA,eAAA,CAAgBS,MAAM,KAAI,IAAI;EAClD,MAAMC,IAAI,GAAGN,EAAE,CAACO,GAAG,CAAC,KAAK,CAAC;EAC1B,MAAMC,aAAa,GAAGL,WAAW,IAAIG,IAAI,IAAI,IAAI;EACjD,MAAMG,UAAU,GAAGC,MAAM,EAAAb,gBAAA,GAACE,QAAQ,CAACK,KAAK,cAAAP,gBAAA,uBAAdA,gBAAA,CAAgBvF,GAAG,CAAC,IAAI,CAAC;EAEnD,MAAM,CAAC+F,MAAM,EAAEM,SAAS,CAAC,GAAGrO,QAAQ,CAACkO,aAAa,CAAC;EACnD,MAAM,CAAClG,GAAG,EAAE2B,MAAM,CAAC,GAAG3J,QAAQ,CAACmO,UAAU,CAAC;EAC1C,MAAM,CAACpG,QAAQ,EAAEuG,WAAW,CAAC,GAAGtO,QAAQ,CAAC,UAAU,CAAC;EACpD,MAAM,CAACuO,KAAK,EAAEC,QAAQ,CAAC,GAAGxO,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACyO,MAAM,EAAEC,SAAS,CAAC,GAAG1O,QAAQ,CAAC,OAAO,CAAC;EAC7C,MAAM,CAAC2O,OAAO,EAAEC,UAAU,CAAC,GAAG5O,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAM6O,IAAI,GAAG9O,MAAM,CAAC,CAAC,CAAC,CAAC;EACvB,MAAM+O,WAAW,GAAGA,CAAC9D,EAAE,EAAE/E,EAAE,KAAK;IAC9B,IAAIA,EAAE,EAAE4I,IAAI,CAAC3I,OAAO,CAAC8E,EAAE,CAAC,GAAG/E,EAAE;EAC/B,CAAC;EAEDpG,SAAS,CAAC,MAAM;IACd,IAAI,CAACkO,MAAM,EAAE;IACb,MAAM9H,EAAE,GAAG4I,IAAI,CAAC3I,OAAO,CAAC6H,MAAM,CAAC;IAC/B,IAAI9H,EAAE,EAAEA,EAAE,CAAC8I,cAAc,CAAC;MAAEC,QAAQ,EAAE,QAAQ;MAAEC,KAAK,EAAE;IAAQ,CAAC,CAAC;EACnE,CAAC,EAAE,CAAClB,MAAM,EAAEnL,IAAI,CAAC,CAAC;;EAElB;EACA,MAAM;IAAEsM;EAAQ,CAAC,GAAG9O,SAAS,CAAC,CAAC;EAC/B,MAAM+O,IAAI,GAAG9O,YAAY,CAAC6O,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;EACjE,MAAME,KAAK,GAAG/O,YAAY,CAAC6O,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,wBAAwB,EAAE,uBAAuB,CAAC,CAAC;EACjG,MAAMG,SAAS,GAAGhP,YAAY,CAAC6O,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,mBAAmB,EAAE,mBAAmB,CAAC,CAAC;EAC5F,MAAMI,SAAS,GAAGjP,YAAY,CAAC6O,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,6BAA6B,EAAE,6BAA6B,CAAC,CAAC;;EAEhH;EACA,MAAMK,QAAQ,GAAGzP,OAAO,CAAC,MAAM;IAC7B,MAAM0P,CAAC,GAAGjB,KAAK,CAACtJ,IAAI,CAAC,CAAC,CAACwK,WAAW,CAAC,CAAC;IACpC,MAAMC,IAAI,GAAG9M,IAAI,CAAC8B,GAAG,CAAEzC,CAAC,IAAK;MAC3B,MAAMyH,GAAG,GAAG9F,eAAe,CAAC3B,CAAC,EAAE+B,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEL,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACnD,OAAO;QAAE,GAAG1B,CAAC;QAAE0N,IAAI,EAAEjG;MAAI,CAAC;IAC5B,CAAC,CAAC;IACF,MAAMkG,QAAQ,GAAGJ,CAAC,GACdE,IAAI,CAAChF,MAAM,CAAEzI,CAAC,IAAK;MAAA,IAAA4N,OAAA,EAAAC,QAAA;MACjB,MAAMC,GAAG,GACP,CAAC,EAAAF,OAAA,GAAA5N,CAAC,CAAC0N,IAAI,cAAAE,OAAA,uBAANA,OAAA,CAAQzE,KAAK,KAAI,EAAE,IACpB,GAAG,IACF3I,KAAK,CAACC,OAAO,EAAAoN,QAAA,GAAC7N,CAAC,CAAC0N,IAAI,cAAAG,QAAA,uBAANA,QAAA,CAAQxE,KAAK,CAAC,GAAGrJ,CAAC,CAAC0N,IAAI,CAACrE,KAAK,CAACC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAC5D,GAAG,IACFtJ,CAAC,CAACoJ,IAAI,IAAI,EAAE,CAAC;MAChB,OAAO0E,GAAG,CAACN,WAAW,CAAC,CAAC,CAACO,QAAQ,CAACR,CAAC,CAAC;IACtC,CAAC,CAAC,GACFE,IAAI;IAER,IAAIjB,MAAM,KAAK,MAAM,EAAE;MACrB,OAAOmB,QAAQ,CAAClH,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC;QAAA,IAAAqH,OAAA,EAAAC,OAAA;QAAA,OAAK,CAAC,EAAAD,OAAA,GAAAtH,CAAC,CAACgH,IAAI,cAAAM,OAAA,uBAANA,OAAA,CAAQ7E,KAAK,KAAI,EAAE,EAAE+E,aAAa,CAAC,EAAAD,OAAA,GAAAtH,CAAC,CAAC+G,IAAI,cAAAO,OAAA,uBAANA,OAAA,CAAQ9E,KAAK,KAAI,EAAE,CAAC;MAAA,EAAC;IAC1F;IAEA,OAAOwE,QAAQ,CAAClH,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MAC7B,MAAMwH,EAAE,GACN,CAACzH,CAAC,CAAC8B,WAAW,IAAI,EAAE,EAAEvG,IAAI,CAAEyG,CAAC,IAAKA,CAAC,CAAC3C,GAAG,KAAKA,GAAG,IAAI2C,CAAC,CAAC5C,QAAQ,KAAKA,QAAQ,CAAC,IAC3E,CAACY,CAAC,CAAC8B,WAAW,IAAI,EAAE,EAAEvG,IAAI,CAAEyG,CAAC,IAAKA,CAAC,CAAC3C,GAAG,KAAKA,GAAG,CAAC,IAChD,CAACW,CAAC,CAAC8B,WAAW,IAAI,EAAE,EAAE,CAAC,CAAC;MAC1B,MAAM4F,EAAE,GACN,CAACzH,CAAC,CAAC6B,WAAW,IAAI,EAAE,EAAEvG,IAAI,CAAEyG,CAAC,IAAKA,CAAC,CAAC3C,GAAG,KAAKA,GAAG,IAAI2C,CAAC,CAAC5C,QAAQ,KAAKA,QAAQ,CAAC,IAC3E,CAACa,CAAC,CAAC6B,WAAW,IAAI,EAAE,EAAEvG,IAAI,CAAEyG,CAAC,IAAKA,CAAC,CAAC3C,GAAG,KAAKA,GAAG,CAAC,IAChD,CAACY,CAAC,CAAC6B,WAAW,IAAI,EAAE,EAAE,CAAC,CAAC;MAC1B,OAAO,CAAC,CAAA2F,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEpH,SAAS,KAAI,CAAC,KAAK,CAAAqH,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAErH,SAAS,KAAI,CAAC,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC,EAAE,CAACpG,IAAI,EAAE2L,KAAK,EAAEvG,GAAG,EAAEyG,MAAM,EAAE1G,QAAQ,EAAE/D,MAAM,CAAC,CAAC;EAEhD,oBACE9C,OAAA;IAAKsD,SAAS,EAAC,0BAA0B;IAAAC,QAAA,gBAEvCvD,OAAA,CAACf,MAAM,CAACsM,GAAG;MACTtF,KAAK,EAAE;QAAEH,MAAM,EAAEmI,IAAI;QAAEmB,SAAS,EAAEhB;MAAU,CAAE;MAC9C9K,SAAS,EAAC,qIAAqI;MAAAC,QAAA,gBAE/IvD,OAAA,CAACf,MAAM,CAACsM,GAAG;QAACjI,SAAS,EAAC,8BAA8B;QAAC2C,KAAK,EAAE;UAAEoJ,UAAU,EAAEnB;QAAM;MAAE;QAAAjK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACrFpE,OAAA,CAACf,MAAM,CAACsM,GAAG;QAACjI,SAAS,EAAC,gDAAgD;QAAC2C,KAAK,EAAE;UAAEoJ,UAAU,EAAElB;QAAU;MAAE;QAAAlK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC3GpE,OAAA;QAAKsD,SAAS,EAAC,4DAA4D;QAAAC,QAAA,gBACzEvD,OAAA;UAAIsD,SAAS,EAAC,sEAAsE;UAAAC,QAAA,EACjF+D,CAAC,CAAC,eAAe;QAAC;UAAArD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC,eAELpE,OAAA;UAAKsD,SAAS,EAAC,sBAAsB;UAAAC,QAAA,eACnCvD,OAAA;YAAKsD,SAAS,EAAC,UAAU;YAAAC,QAAA,gBACvBvD,OAAA;cACE0L,IAAI,EAAC,MAAM;cACXnB,KAAK,EAAE8C,KAAM;cACb7C,QAAQ,EAAGpF,CAAC,IAAKkI,QAAQ,CAAClI,CAAC,CAACsF,MAAM,CAACH,KAAK,CAAE;cAC1C+E,WAAW,EAAEhI,CAAC,CAAC,2BAA2B,EAAE;gBAAEgD,YAAY,EAAE;cAA4B,CAAC,CAAE;cAC3FhH,SAAS,EAAC;YAA0E;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrF,CAAC,eACFpE,OAAA;cAAMsD,SAAS,EAAC,yDAAyD;cAAAC,QAAA,EAAC;YAAE;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGNpE,OAAA;UAAKsD,SAAS,EAAC,8HAA8H;UAAAC,QAAA,EAC1I,CAAC,UAAU,EAAE,SAAS,CAAC,CAACC,GAAG,CAAE+L,CAAC,iBAC7BvP,OAAA;YAEE6H,OAAO,EAAEA,CAAA,KAAMuF,WAAW,CAACmC,CAAC,CAAE;YAC9BjM,SAAS,EAAE,OAAOuD,QAAQ,KAAK0I,CAAC,GAAG,aAAa,GAAG,aAAa,sBAAuB;YAAAhM,QAAA,EAEtFgM,CAAC,KAAK,UAAU,GAAGjI,CAAC,CAAC,kBAAkB,EAAE;cAAEgD,YAAY,EAAE;YAAW,CAAC,CAAC,GAAG;UAAS,GAJ9EiF,CAAC;YAAAtL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAKA,CACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAGNpE,OAAA;UAAKsD,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtCvD,OAAA;YAAOwP,OAAO,EAAC,KAAK;YAAClM,SAAS,EAAC,4CAA4C;YAAAC,QAAA,EACxE+D,CAAC,CAAC,cAAc;UAAC;YAAArD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACb,CAAC,eACRpE,OAAA;YAAQ8J,EAAE,EAAC,KAAK;YAACS,KAAK,EAAEzD,GAAI;YAAC0D,QAAQ,EAAGpF,CAAC,IAAKqD,MAAM,CAACgC,QAAQ,CAACrF,CAAC,CAACsF,MAAM,CAACH,KAAK,CAAC,CAAE;YAACjH,SAAS,EAAC,uBAAuB;YAAAC,QAAA,EAC9G,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACC,GAAG,CAAEmH,CAAC,iBACxB3K,OAAA;cAAgBuK,KAAK,EAAEI,CAAE;cAAApH,QAAA,GACtBoH,CAAC,EAAC,GAAC,EAACrD,CAAC,CAAC,UAAU,CAAC;YAAA,GADPqD,CAAC;cAAA1G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEN,CACT;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAGNpE,OAAA;UAAKsD,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtCvD,OAAA;YAAQuK,KAAK,EAAEgD,MAAO;YAAC/C,QAAQ,EAAGpF,CAAC,IAAKoI,SAAS,CAACpI,CAAC,CAACsF,MAAM,CAACH,KAAK,CAAE;YAACjH,SAAS,EAAC,uBAAuB;YAAAC,QAAA,gBAClGvD,OAAA;cAAQuK,KAAK,EAAC,OAAO;cAAAhH,QAAA,EAAE+D,CAAC,CAAC,mBAAmB,EAAE;gBAAEgD,YAAY,EAAE;cAAW,CAAC;YAAC;cAAArG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAS,CAAC,eACrFpE,OAAA;cAAQuK,KAAK,EAAC,MAAM;cAAAhH,QAAA,EAAE+D,CAAC,CAAC,kBAAkB,EAAE;gBAAEgD,YAAY,EAAE;cAAM,CAAC;YAAC;cAAArG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAS,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxE,CAAC,eACTpE,OAAA;YAAQsD,SAAS,EAAC,6BAA6B;YAACuE,OAAO,EAAEA,CAAA,KAAM6F,UAAU,CAAE+B,CAAC,IAAK,CAACA,CAAC,CAAE;YAACvF,KAAK,EAAEuD,OAAO,GAAG,WAAW,GAAG,cAAe;YAAAlK,QAAA,EACjIkK,OAAO,GAAG,IAAI,GAAG;UAAI;YAAAxJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC,eAGbpE,OAAA,CAACf,MAAM,CAACsM,GAAG;MAAC1B,QAAQ,EAAE1J,YAAa;MAACmL,OAAO,EAAC,QAAQ;MAACE,OAAO,EAAC,MAAM;MAAClI,SAAS,EAAE,cAAcmK,OAAO,GAAG,gBAAgB,GAAG,gBAAgB,EAAG;MAAAlK,QAAA,EAC1I8K,QAAQ,CAAC7K,GAAG,CAAEzC,CAAC,IAAK;QACnB,MAAMyH,GAAG,GAAG9F,eAAe,CAAC3B,CAAC,EAAE+B,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEL,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,MAAMiG,MAAM,GAAGmE,MAAM,KAAK9L,CAAC,CAAC+I,EAAE;QAC9B,oBACE9J,OAAA,CAACuI,WAAW;UAEVxH,CAAC,EAAEA,CAAE;UACLyH,GAAG,EAAEA,GAAI;UACT3B,QAAQ,EAAEA,QAAS;UACnBC,GAAG,EAAEA,GAAI;UACT2B,MAAM,EAAEA,MAAO;UACftB,QAAQ,EAAEA,QAAS;UACnBC,EAAE,EAAEA,EAAG;UACPtE,MAAM,EAAEA,MAAO;UACf4F,MAAM,EAAEA,MAAO;UACfC,QAAQ,EAAEA,CAAA,KAAMwE,SAAS,CAACzE,MAAM,GAAG,IAAI,GAAG3H,CAAC,CAAC+I,EAAE,CAAE;UAChDlB,aAAa,EAAEgF,WAAY;UAC3B/E,OAAO,EAAEA,OAAQ;UACjBvB,CAAC,EAAEA;QAAE,GAbAvG,CAAC,CAAC+I,EAAE;UAAA7F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAcV,CAAC;MAEN,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACQ,CAAC,EAGZ,CAACiK,QAAQ,CAAChL,MAAM,iBACfrD,OAAA;MAAKsD,SAAS,EAAC,sDAAsD;MAAAC,QAAA,EAClE+D,CAAC,CAAC,eAAe,EAAE;QAAEgD,YAAY,EAAE;MAAkC,CAAC;IAAC;MAAArG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrE,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC+H,GAAA,CA/KuBD,OAAO;EAAA,QACfnN,cAAc,EACAM,WAAW,EACNC,WAAW,EACxBC,OAAO,EAEVH,WAAW,EA0BRF,SAAS,EAChBC,YAAY,EACXA,YAAY,EACRA,YAAY,EACZA,YAAY;AAAA;AAAAuQ,GAAA,GApCRxD,OAAO;AAAA,IAAA7H,EAAA,EAAAM,GAAA,EAAAgC,GAAA,EAAAK,GAAA,EAAAe,GAAA,EAAAE,GAAA,EAAAK,GAAA,EAAA2D,GAAA,EAAAyD,GAAA;AAAAC,YAAA,CAAAtL,EAAA;AAAAsL,YAAA,CAAAhL,GAAA;AAAAgL,YAAA,CAAAhJ,GAAA;AAAAgJ,YAAA,CAAA3I,GAAA;AAAA2I,YAAA,CAAA5H,GAAA;AAAA4H,YAAA,CAAA1H,GAAA;AAAA0H,YAAA,CAAArH,GAAA;AAAAqH,YAAA,CAAA1D,GAAA;AAAA0D,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}