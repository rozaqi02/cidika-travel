{"ast":null,"code":"import _objectSpread from\"C:/Projects/cidika-travel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const CartCtx=/*#__PURE__*/createContext();export const useCart=()=>useContext(CartCtx);export function CartProvider(_ref){let{children}=_ref;const[items,setItems]=useState(()=>{try{return JSON.parse(localStorage.getItem(\"cart\")||\"[]\");}catch(_unused){return[];}});useEffect(()=>localStorage.setItem(\"cart\",JSON.stringify(items)),[items]);// item: { id, title, price, pax, qty } -> price = price per pax; pax = jumlah orang; qty=1 (selalu)\nconst addItem=item=>setItems(prev=>{const idx=prev.findIndex(p=>p.id===item.id&&p.pax===item.pax);if(idx>=0){const copy=[...prev];copy[idx].qty=(copy[idx].qty||1)+(item.qty||1);return copy;}return[...prev,_objectSpread(_objectSpread({},item),{},{qty:item.qty||1})];});const updateItem=(id,pax,patch)=>setItems(prev=>prev.map(p=>p.id===id&&p.pax===pax?_objectSpread(_objectSpread({},p),patch):p));const removeItem=(id,pax)=>setItems(prev=>prev.filter(p=>!(p.id===id&&p.pax===pax)));const clear=()=>setItems([]);return/*#__PURE__*/_jsx(CartCtx.Provider,{value:{items,addItem,updateItem,removeItem,clear},children:children});}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsx","_jsx","CartCtx","useCart","CartProvider","_ref","children","items","setItems","JSON","parse","localStorage","getItem","_unused","setItem","stringify","addItem","item","prev","idx","findIndex","p","id","pax","copy","qty","_objectSpread","updateItem","patch","map","removeItem","filter","clear","Provider","value"],"sources":["C:/Projects/cidika-travel/src/context/CartContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\n\nconst CartCtx = createContext();\nexport const useCart = () => useContext(CartCtx);\n\nexport function CartProvider({ children }) {\n  const [items, setItems] = useState(() => {\n    try { return JSON.parse(localStorage.getItem(\"cart\")||\"[]\"); } catch { return []; }\n  });\n  useEffect(() => localStorage.setItem(\"cart\", JSON.stringify(items)), [items]);\n\n  // item: { id, title, price, pax, qty } -> price = price per pax; pax = jumlah orang; qty=1 (selalu)\n  const addItem = (item) => setItems(prev => {\n    const idx = prev.findIndex(p => p.id === item.id && p.pax === item.pax);\n    if (idx >= 0) {\n      const copy = [...prev]; copy[idx].qty = (copy[idx].qty || 1) + (item.qty || 1); return copy;\n    }\n    return [...prev, { ...item, qty: item.qty || 1 }];\n  });\n\n  const updateItem = (id, pax, patch) => setItems(prev =>\n    prev.map(p => (p.id === id && p.pax === pax ? { ...p, ...patch } : p))\n  );\n  const removeItem = (id, pax) => setItems(prev => prev.filter(p => !(p.id === id && p.pax === pax)));\n  const clear = () => setItems([]);\n\n  return (\n    <CartCtx.Provider value={{ items, addItem, updateItem, removeItem, clear }}>\n      {children}\n    </CartCtx.Provider>\n  );\n}\n"],"mappings":"8GAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,OAAO,cAAGN,aAAa,CAAC,CAAC,CAC/B,MAAO,MAAM,CAAAO,OAAO,CAAGA,CAAA,GAAMN,UAAU,CAACK,OAAO,CAAC,CAEhD,MAAO,SAAS,CAAAE,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,IAAM,CACvC,GAAI,CAAE,MAAO,CAAAU,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAE,CAAE,MAAAC,OAAA,CAAM,CAAE,MAAO,EAAE,CAAE,CACpF,CAAC,CAAC,CACFf,SAAS,CAAC,IAAMa,YAAY,CAACG,OAAO,CAAC,MAAM,CAAEL,IAAI,CAACM,SAAS,CAACR,KAAK,CAAC,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAE7E;AACA,KAAM,CAAAS,OAAO,CAAIC,IAAI,EAAKT,QAAQ,CAACU,IAAI,EAAI,CACzC,KAAM,CAAAC,GAAG,CAAGD,IAAI,CAACE,SAAS,CAACC,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAKL,IAAI,CAACK,EAAE,EAAID,CAAC,CAACE,GAAG,GAAKN,IAAI,CAACM,GAAG,CAAC,CACvE,GAAIJ,GAAG,EAAI,CAAC,CAAE,CACZ,KAAM,CAAAK,IAAI,CAAG,CAAC,GAAGN,IAAI,CAAC,CAAEM,IAAI,CAACL,GAAG,CAAC,CAACM,GAAG,CAAG,CAACD,IAAI,CAACL,GAAG,CAAC,CAACM,GAAG,EAAI,CAAC,GAAKR,IAAI,CAACQ,GAAG,EAAI,CAAC,CAAC,CAAE,MAAO,CAAAD,IAAI,CAC7F,CACA,MAAO,CAAC,GAAGN,IAAI,CAAAQ,aAAA,CAAAA,aAAA,IAAOT,IAAI,MAAEQ,GAAG,CAAER,IAAI,CAACQ,GAAG,EAAI,CAAC,GAAG,CACnD,CAAC,CAAC,CAEF,KAAM,CAAAE,UAAU,CAAGA,CAACL,EAAE,CAAEC,GAAG,CAAEK,KAAK,GAAKpB,QAAQ,CAACU,IAAI,EAClDA,IAAI,CAACW,GAAG,CAACR,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKA,EAAE,EAAID,CAAC,CAACE,GAAG,GAAKA,GAAG,CAAAG,aAAA,CAAAA,aAAA,IAAQL,CAAC,EAAKO,KAAK,EAAKP,CAAE,CACvE,CAAC,CACD,KAAM,CAAAS,UAAU,CAAGA,CAACR,EAAE,CAAEC,GAAG,GAAKf,QAAQ,CAACU,IAAI,EAAIA,IAAI,CAACa,MAAM,CAACV,CAAC,EAAI,EAAEA,CAAC,CAACC,EAAE,GAAKA,EAAE,EAAID,CAAC,CAACE,GAAG,GAAKA,GAAG,CAAC,CAAC,CAAC,CACnG,KAAM,CAAAS,KAAK,CAAGA,CAAA,GAAMxB,QAAQ,CAAC,EAAE,CAAC,CAEhC,mBACEP,IAAA,CAACC,OAAO,CAAC+B,QAAQ,EAACC,KAAK,CAAE,CAAE3B,KAAK,CAAES,OAAO,CAAEW,UAAU,CAAEG,UAAU,CAAEE,KAAM,CAAE,CAAA1B,QAAA,CACxEA,QAAQ,CACO,CAAC,CAEvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}