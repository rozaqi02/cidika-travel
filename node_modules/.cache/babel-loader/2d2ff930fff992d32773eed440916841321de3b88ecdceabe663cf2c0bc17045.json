{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{supabase}from\"../../lib/supabaseClient.js\";import{useAuth}from\"../../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const{profile}=useAuth();const[stats,setStats]=useState({bookings:0,packages:0,sections:0});const[recent,setRecent]=useState([]);useEffect(()=>{(async()=>{const{count:b}=await supabase.from(\"bookings\").select(\"*\",{count:\"exact\",head:true});const{count:p}=await supabase.from(\"packages\").select(\"*\",{count:\"exact\",head:true});const{count:s}=await supabase.from(\"page_sections\").select(\"*\",{count:\"exact\",head:true});setStats({bookings:b||0,packages:p||0,sections:s||0});const{data:rec}=await supabase.from(\"bookings\").select(\"id, created_at, customer_name, total_idr, status\").order(\"created_at\",{ascending:false}).limit(5);setRecent(rec||[]);})();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-6 space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-3 gap-4\",children:Object.entries(stats).map(_ref=>{let[k,v]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 capitalize\",children:k}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:v})]},k);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold mb-2\",children:\"Order terbaru\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Tanggal\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nama\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total (IDR)\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[recent.map(r=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t border-slate-100 dark:border-slate-800\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:new Date(r.created_at).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:r.customer_name}),/*#__PURE__*/_jsx(\"td\",{children:r.status}),/*#__PURE__*/_jsx(\"td\",{children:r.total_idr.toLocaleString(\"id-ID\")})]},r.id)),recent.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"p-2 text-slate-500\",colSpan:4,children:\"Belum ada data\"})})]})]})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","supabase","useAuth","jsx","_jsx","jsxs","_jsxs","Dashboard","profile","stats","setStats","bookings","packages","sections","recent","setRecent","count","b","from","select","head","p","s","data","rec","order","ascending","limit","className","children","Object","entries","map","_ref","k","v","r","Date","created_at","toLocaleString","customer_name","status","total_idr","id","length","colSpan"],"sources":["C:/Projects/cidika-travel/src/pages/admin/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { supabase } from \"../../lib/supabaseClient.js\";\nimport { useAuth } from \"../../context/AuthContext\";\n\nexport default function Dashboard() {\n  const { profile } = useAuth();\n  const [stats, setStats] = useState({ bookings: 0, packages: 0, sections: 0 });\n  const [recent, setRecent] = useState([]);\n\n  useEffect(() => {\n    (async () => {\n      const { count: b } = await supabase.from(\"bookings\").select(\"*\", { count: \"exact\", head: true });\n      const { count: p } = await supabase.from(\"packages\").select(\"*\", { count: \"exact\", head: true });\n      const { count: s } = await supabase.from(\"page_sections\").select(\"*\", { count: \"exact\", head: true });\n      setStats({ bookings: b || 0, packages: p || 0, sections: s || 0 });\n\n      const { data: rec } = await supabase.from(\"bookings\")\n        .select(\"id, created_at, customer_name, total_idr, status\")\n        .order(\"created_at\", { ascending: false })\n        .limit(5);\n      setRecent(rec || []);\n    })();\n  }, []);\n\n  return (\n    <div className=\"container mt-6 space-y-6\">\n      <div className=\"grid md:grid-cols-3 gap-4\">\n        {Object.entries(stats).map(([k, v]) => (\n          <div key={k} className=\"card p-4\">\n            <p className=\"text-slate-500 capitalize\">{k}</p>\n            <p className=\"text-3xl font-bold\">{v}</p>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"card p-4\">\n        <h2 className=\"font-semibold mb-2\">Order terbaru</h2>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full text-sm\">\n            <thead><tr className=\"text-left\"><th className=\"p-2\">Tanggal</th><th>Nama</th><th>Status</th><th>Total (IDR)</th></tr></thead>\n            <tbody>\n              {recent.map(r => (\n                <tr key={r.id} className=\"border-t border-slate-100 dark:border-slate-800\">\n                  <td className=\"p-2\">{new Date(r.created_at).toLocaleString()}</td>\n                  <td>{r.customer_name}</td>\n                  <td>{r.status}</td>\n                  <td>{r.total_idr.toLocaleString(\"id-ID\")}</td>\n                </tr>\n              ))}\n              {recent.length === 0 && <tr><td className=\"p-2 text-slate-500\" colSpan={4}>Belum ada data</td></tr>}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}