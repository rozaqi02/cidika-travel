{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\cidika-travel\\\\src\\\\pages\\\\admin\\\\Kustomisasi.jsx\",\n  _s = $RefreshSig$();\n// src/pages/admin/Kustomisasi.jsx\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { supabase } from \"../../lib/supabaseClient\";\nimport { useTranslation } from \"react-i18next\";\nimport { Trash2, Plus, ArrowUp, ArrowDown, Upload } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LANGS = [\"id\", \"en\", \"ja\"];\nconst PAGES = [{\n  key: \"home\",\n  label: \"Home\"\n}, {\n  key: \"explore\",\n  label: \"Explore\"\n}, {\n  key: \"destinations\",\n  label: \"Destinations\"\n}, {\n  key: \"faq\",\n  label: \"FAQ\"\n}, {\n  key: \"contact\",\n  label: \"Contact\"\n}];\nexport default function Kustomisasi() {\n  _s();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [page, setPage] = useState(\"home\");\n  const [sections, setSections] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [activeLang, setActiveLang] = useState(LANGS[0]);\n  const load = async () => {\n    setLoading(true);\n    const {\n      data,\n      error\n    } = await supabase.from(\"page_sections\").select(\"id,page,section_key,sort_index,data,page_section_locales(*)\").eq(\"page\", page).order(\"sort_index\", {\n      ascending: true\n    });\n    if (error) {\n      console.error(error);\n      setSections([]);\n      setLoading(false);\n      return;\n    }\n    const mapped = (data || []).map(s => ({\n      ...s,\n      locales: LANGS.reduce((acc, l) => {\n        var _s$page_section_local;\n        const r = ((_s$page_section_local = s.page_section_locales) === null || _s$page_section_local === void 0 ? void 0 : _s$page_section_local.find(x => x.lang === l)) || {};\n        acc[l] = {\n          title: r.title || \"\",\n          body_md: r.body_md || \"\",\n          extra: r.extra || null\n        };\n        return acc;\n      }, {}),\n      dataText: JSON.stringify(s.data || {}, null, 2),\n      // editor string\n      dataValid: true\n    }));\n    setSections(mapped);\n    setLoading(false);\n  };\n  useEffect(() => {\n    load();\n  }, [page]);\n  const updateLocal = (sid, lang, field, value) => {\n    setSections(prev => prev.map(s => s.id === sid ? {\n      ...s,\n      locales: {\n        ...s.locales,\n        [lang]: {\n          ...s.locales[lang],\n          [field]: value\n        }\n      }\n    } : s));\n  };\n  const updateDataText = (sid, text) => {\n    setSections(prev => prev.map(s => {\n      if (s.id !== sid) return s;\n      let valid = true;\n      try {\n        JSON.parse(text || \"{}\");\n      } catch {\n        valid = false;\n      }\n      return {\n        ...s,\n        dataText: text,\n        dataValid: valid\n      };\n    }));\n  };\n  const commitDataJSON = s => {\n    try {\n      return JSON.parse(s.dataText || \"{}\");\n    } catch {\n      return s.data || {};\n    }\n  };\n  const addSection = async () => {\n    var _sections;\n    const section_key = prompt(\"Section key (mis: hero, whyus, stats, how, testimonials, cta)?\");\n    if (!section_key) return;\n    const sort_index = (((_sections = sections[sections.length - 1]) === null || _sections === void 0 ? void 0 : _sections.sort_index) || 0) + 10;\n    const {\n      data,\n      error\n    } = await supabase.from(\"page_sections\").insert({\n      page,\n      section_key,\n      sort_index,\n      data: {}\n    }).select().single();\n    if (error) {\n      alert(error.message);\n      return;\n    }\n    setSections(prev => [...prev, {\n      ...data,\n      locales: LANGS.reduce((acc, l) => ({\n        ...acc,\n        [l]: {\n          title: \"\",\n          body_md: \"\",\n          extra: null\n        }\n      }), {}),\n      dataText: \"{}\",\n      dataValid: true\n    }]);\n  };\n  const deleteSection = async id => {\n    if (!confirm(\"Hapus section ini?\")) return;\n    const {\n      error\n    } = await supabase.from(\"page_sections\").delete().eq(\"id\", id);\n    if (error) {\n      alert(error.message);\n      return;\n    }\n    setSections(prev => prev.filter(s => s.id !== id));\n  };\n  const move = (id, dir) => {\n    // dir = -1 (up) / +1 (down)\n    const idx = sections.findIndex(s => s.id === id);\n    if (idx < 0) return;\n    const target = idx + dir;\n    if (target < 0 || target >= sections.length) return;\n    const a = sections[idx],\n      b = sections[target];\n    setSections(prev => {\n      const copy = [...prev];\n      copy[idx] = {\n        ...b,\n        sort_index: a.sort_index\n      };\n      copy[target] = {\n        ...a,\n        sort_index: b.sort_index\n      };\n      return copy;\n    });\n  };\n  const save = async () => {\n    setSaving(true);\n    try {\n      for (const s of sections) {\n        const dataJSON = commitDataJSON(s);\n        const {\n          error: e1\n        } = await supabase.from(\"page_sections\").update({\n          data: dataJSON,\n          sort_index: s.sort_index,\n          section_key: s.section_key\n        }).eq(\"id\", s.id);\n        if (e1) throw e1;\n        for (const lang of LANGS) {\n          const payload = {\n            section_id: s.id,\n            lang,\n            title: s.locales[lang].title || null,\n            body_md: s.locales[lang].body_md || null,\n            extra: s.locales[lang].extra || null\n          };\n          const {\n            error: e2\n          } = await supabase.from(\"page_section_locales\").upsert(payload, {\n            onConflict: \"section_id,lang\"\n          });\n          if (e2) throw e2;\n        }\n      }\n      alert(t(\"admin.customize.saved\"));\n      await load();\n    } catch (e) {\n      console.error(e);\n      alert(e.message || t(\"admin.customize.saveFailed\"));\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // upload ke storage 'assets'\n  const onUpload = async (sid, file) => {\n    if (!file) return;\n    const ext = file.name.split(\".\").pop();\n    const path = `pages/${page}/${sid}-${Date.now()}.${ext}`;\n    const {\n      error: upErr\n    } = await supabase.storage.from(\"assets\").upload(path, file, {\n      cacheControl: \"3600\",\n      upsert: false\n    });\n    if (upErr) {\n      alert(upErr.message);\n      return;\n    }\n    const {\n      data: pub\n    } = supabase.storage.from(\"assets\").getPublicUrl(path);\n    const url = pub === null || pub === void 0 ? void 0 : pub.publicUrl;\n\n    // inject ke data.images[]\n    setSections(prev => prev.map(s => {\n      if (s.id !== sid) return s;\n      let obj;\n      try {\n        obj = JSON.parse(s.dataText || \"{}\");\n      } catch {\n        obj = {};\n      }\n      const arr = Array.isArray(obj.images) ? obj.images.slice() : [];\n      arr.push(url);\n      obj.images = arr;\n      return {\n        ...s,\n        dataText: JSON.stringify(obj, null, 2),\n        dataValid: true\n      };\n    }));\n  };\n  const sorted = useMemo(() => sections.slice().sort((a, b) => a.sort_index - b.sort_index), [sections]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-6\",\n    children: t(\"misc.loading\")\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-6 space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap items-center justify-between gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold\",\n          children: t(\"admin.customize.title\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"px-3 py-2 rounded-2xl border\",\n          value: page,\n          onChange: e => setPage(e.target.value),\n          children: PAGES.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: p.key,\n            children: p.label\n          }, p.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 27\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-outline\",\n          onClick: addSection,\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 68\n          }, this), \" Tambah Section\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: save,\n          disabled: saving || sections.some(s => !s.dataValid),\n          children: saving ? t(\"admin.customize.saving\") : t(\"admin.customize.saveAll\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap items-center gap-2\",\n      children: LANGS.map(l => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn ${activeLang === l ? \"btn-primary\" : \"btn-outline\"} !py-1 !px-3`,\n        onClick: () => setActiveLang(l),\n        children: l.toUpperCase()\n      }, l, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: sorted.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap items-center justify-between gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold uppercase\",\n              children: [\"[\", s.section_key, \"]\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: s.section_key,\n              onChange: e => setSections(prev => prev.map(x => x.id === s.id ? {\n                ...x,\n                section_key: e.target.value\n              } : x)),\n              className: \"px-2 py-1 rounded-xl border dark:bg-slate-900\",\n              placeholder: \"section_key\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 rounded-xl border hover:bg-slate-50 dark:hover:bg-slate-800\",\n              onClick: () => move(s.id, -1),\n              title: \"Naik\",\n              children: /*#__PURE__*/_jsxDEV(ArrowUp, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 143\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 rounded-xl border hover:bg-slate-50 dark:hover:bg-slate-800\",\n              onClick: () => move(s.id, +1),\n              title: \"Turun\",\n              children: /*#__PURE__*/_jsxDEV(ArrowDown, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 144\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm\",\n              children: t(\"admin.customize.sort\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"w-20 border rounded-xl px-2 py-1 dark:bg-slate-900\",\n              value: s.sort_index,\n              onChange: e => setSections(prev => prev.map(x => x.id === s.id ? {\n                ...x,\n                sort_index: parseInt(e.target.value) || 0\n              } : x))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 rounded-xl border hover:bg-red-50 dark:hover:bg-slate-800\",\n              onClick: () => deleteSection(s.id),\n              title: \"Hapus\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 147\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4 mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-sm\",\n                children: t(\"admin.customize.dataJsonLabel\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"inline-flex items-center gap-2 text-xs cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(Upload, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this), \" Upload Image\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  className: \"hidden\",\n                  onChange: e => {\n                    var _e$target$files;\n                    return onUpload(s.id, (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0]);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              rows: \"14\",\n              className: `w-full border rounded-xl px-3 py-2 dark:bg-slate-900 font-mono text-xs ${s.dataValid ? '' : 'border-red-500'}`,\n              value: s.dataText,\n              onChange: e => updateDataText(s.id, e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this), !s.dataValid && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-red-600 mt-1\",\n              children: \"JSON tidak valid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium uppercase\",\n              children: activeLang\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm\",\n              children: t(\"admin.customize.titleLabel\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"w-full border rounded-xl px-3 py-2 dark:bg-slate-900 mb-2\",\n              value: s.locales[activeLang].title,\n              onChange: e => updateLocal(s.id, activeLang, \"title\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm\",\n              children: t(\"admin.customize.bodyLabel\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              rows: \"8\",\n              className: \"w-full border rounded-xl px-3 py-2 dark:bg-slate-900\",\n              value: s.locales[activeLang].body_md,\n              onChange: e => updateLocal(s.id, activeLang, \"body_md\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)]\n      }, s.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 5\n  }, this);\n}\n_s(Kustomisasi, \"VyqjOeQXwV/WBH9atsMLJo2jqxE=\", false, function () {\n  return [useTranslation];\n});\n_c = Kustomisasi;\nvar _c;\n$RefreshReg$(_c, \"Kustomisasi\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","supabase","useTranslation","Trash2","Plus","ArrowUp","ArrowDown","Upload","jsxDEV","_jsxDEV","LANGS","PAGES","key","label","Kustomisasi","_s","t","i18n","page","setPage","sections","setSections","loading","setLoading","saving","setSaving","activeLang","setActiveLang","load","data","error","from","select","eq","order","ascending","console","mapped","map","s","locales","reduce","acc","l","_s$page_section_local","r","page_section_locales","find","x","lang","title","body_md","extra","dataText","JSON","stringify","dataValid","updateLocal","sid","field","value","prev","id","updateDataText","text","valid","parse","commitDataJSON","addSection","_sections","section_key","prompt","sort_index","length","insert","single","alert","message","deleteSection","confirm","delete","filter","move","dir","idx","findIndex","target","a","b","copy","save","dataJSON","e1","update","payload","section_id","e2","upsert","onConflict","e","onUpload","file","ext","name","split","pop","path","Date","now","upErr","storage","upload","cacheControl","pub","getPublicUrl","url","publicUrl","obj","arr","Array","isArray","images","slice","push","sorted","sort","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","p","onClick","size","disabled","some","toUpperCase","placeholder","type","parseInt","accept","_e$target$files","files","rows","_c","$RefreshReg$"],"sources":["C:/projects/cidika-travel/src/pages/admin/Kustomisasi.jsx"],"sourcesContent":["// src/pages/admin/Kustomisasi.jsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { supabase } from \"../../lib/supabaseClient\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Trash2, Plus, ArrowUp, ArrowDown, Upload } from \"lucide-react\";\r\n\r\nconst LANGS = [\"id\", \"en\", \"ja\"];\r\nconst PAGES = [\r\n  { key: \"home\", label: \"Home\" },\r\n  { key: \"explore\", label: \"Explore\" },\r\n  { key: \"destinations\", label: \"Destinations\" },\r\n  { key: \"faq\", label: \"FAQ\" },\r\n  { key: \"contact\", label: \"Contact\" },\r\n];\r\n\r\nexport default function Kustomisasi() {\r\n  const { t, i18n } = useTranslation();\r\n  const [page, setPage] = useState(\"home\");\r\n  const [sections, setSections] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [activeLang, setActiveLang] = useState(LANGS[0]);\r\n\r\n  const load = async () => {\r\n    setLoading(true);\r\n    const { data, error } = await supabase\r\n      .from(\"page_sections\")\r\n      .select(\"id,page,section_key,sort_index,data,page_section_locales(*)\")\r\n      .eq(\"page\", page)\r\n      .order(\"sort_index\", { ascending: true });\r\n\r\n    if (error) {\r\n      console.error(error);\r\n      setSections([]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const mapped = (data || []).map((s) => ({\r\n      ...s,\r\n      locales: LANGS.reduce((acc, l) => {\r\n        const r = s.page_section_locales?.find((x) => x.lang === l) || {};\r\n        acc[l] = {\r\n          title: r.title || \"\",\r\n          body_md: r.body_md || \"\",\r\n          extra: r.extra || null,\r\n        };\r\n        return acc;\r\n      }, {}),\r\n      dataText: JSON.stringify(s.data || {}, null, 2), // editor string\r\n      dataValid: true,\r\n    }));\r\n    setSections(mapped);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => { load(); }, [page]);\r\n\r\n  const updateLocal = (sid, lang, field, value) => {\r\n    setSections((prev) =>\r\n      prev.map((s) =>\r\n        s.id === sid ? { ...s, locales: { ...s.locales, [lang]: { ...s.locales[lang], [field]: value } } } : s\r\n      )\r\n    );\r\n  };\r\n\r\n  const updateDataText = (sid, text) => {\r\n    setSections((prev) =>\r\n      prev.map((s) => {\r\n        if (s.id !== sid) return s;\r\n        let valid = true;\r\n        try { JSON.parse(text || \"{}\"); } catch { valid = false; }\r\n        return { ...s, dataText: text, dataValid: valid };\r\n      })\r\n    );\r\n  };\r\n\r\n  const commitDataJSON = (s) => {\r\n    try { return JSON.parse(s.dataText || \"{}\"); } catch { return s.data || {}; }\r\n  };\r\n\r\n  const addSection = async () => {\r\n    const section_key = prompt(\"Section key (mis: hero, whyus, stats, how, testimonials, cta)?\");\r\n    if (!section_key) return;\r\n    const sort_index = (sections[sections.length - 1]?.sort_index || 0) + 10;\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"page_sections\")\r\n      .insert({ page, section_key, sort_index, data: {} })\r\n      .select()\r\n      .single();\r\n\r\n    if (error) { alert(error.message); return; }\r\n    setSections((prev) => [\r\n      ...prev,\r\n      {\r\n        ...data,\r\n        locales: LANGS.reduce((acc, l) => ({ ...acc, [l]: { title: \"\", body_md: \"\", extra: null } }), {}),\r\n        dataText: \"{}\",\r\n        dataValid: true,\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const deleteSection = async (id) => {\r\n    if (!confirm(\"Hapus section ini?\")) return;\r\n    const { error } = await supabase.from(\"page_sections\").delete().eq(\"id\", id);\r\n    if (error) { alert(error.message); return; }\r\n    setSections((prev) => prev.filter((s) => s.id !== id));\r\n  };\r\n\r\n  const move = (id, dir) => {\r\n    // dir = -1 (up) / +1 (down)\r\n    const idx = sections.findIndex((s) => s.id === id);\r\n    if (idx < 0) return;\r\n    const target = idx + dir;\r\n    if (target < 0 || target >= sections.length) return;\r\n    const a = sections[idx], b = sections[target];\r\n    setSections((prev) => {\r\n      const copy = [...prev];\r\n      copy[idx] = { ...b, sort_index: a.sort_index };\r\n      copy[target] = { ...a, sort_index: b.sort_index };\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const save = async () => {\r\n    setSaving(true);\r\n    try {\r\n      for (const s of sections) {\r\n        const dataJSON = commitDataJSON(s);\r\n        const { error: e1 } = await supabase.from(\"page_sections\")\r\n          .update({ data: dataJSON, sort_index: s.sort_index, section_key: s.section_key })\r\n          .eq(\"id\", s.id);\r\n        if (e1) throw e1;\r\n\r\n        for (const lang of LANGS) {\r\n          const payload = {\r\n            section_id: s.id, lang,\r\n            title: s.locales[lang].title || null,\r\n            body_md: s.locales[lang].body_md || null,\r\n            extra: s.locales[lang].extra || null,\r\n          };\r\n          const { error: e2 } = await supabase.from(\"page_section_locales\")\r\n            .upsert(payload, { onConflict: \"section_id,lang\" });\r\n          if (e2) throw e2;\r\n        }\r\n      }\r\n      alert(t(\"admin.customize.saved\"));\r\n      await load();\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(e.message || t(\"admin.customize.saveFailed\"));\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // upload ke storage 'assets'\r\n  const onUpload = async (sid, file) => {\r\n    if (!file) return;\r\n    const ext = file.name.split(\".\").pop();\r\n    const path = `pages/${page}/${sid}-${Date.now()}.${ext}`;\r\n\r\n    const { error: upErr } = await supabase.storage.from(\"assets\").upload(path, file, {\r\n      cacheControl: \"3600\",\r\n      upsert: false,\r\n    });\r\n    if (upErr) { alert(upErr.message); return; }\r\n\r\n    const { data: pub } = supabase.storage.from(\"assets\").getPublicUrl(path);\r\n    const url = pub?.publicUrl;\r\n\r\n    // inject ke data.images[]\r\n    setSections(prev => prev.map(s=>{\r\n      if(s.id!==sid) return s;\r\n      let obj; try{ obj=JSON.parse(s.dataText||\"{}\"); }catch{ obj={}; }\r\n      const arr = Array.isArray(obj.images) ? obj.images.slice() : [];\r\n      arr.push(url);\r\n      obj.images = arr;\r\n      return { ...s, dataText: JSON.stringify(obj, null, 2), dataValid: true };\r\n    }));\r\n  };\r\n\r\n  const sorted = useMemo(()=>sections.slice().sort((a,b)=>a.sort_index-b.sort_index),[sections]);\r\n\r\n  if (loading) return <div className=\"container mt-6\">{t(\"misc.loading\")}</div>;\r\n\r\n  return (\r\n    <div className=\"container mt-6 space-y-4\">\r\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <h1 className=\"text-2xl font-bold\">{t(\"admin.customize.title\")}</h1>\r\n          <select className=\"px-3 py-2 rounded-2xl border\" value={page} onChange={(e)=>setPage(e.target.value)}>\r\n            {PAGES.map(p=><option key={p.key} value={p.key}>{p.label}</option>)}\r\n          </select>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button className=\"btn btn-outline\" onClick={addSection}><Plus size={16}/> Tambah Section</button>\r\n          <button className=\"btn btn-primary\" onClick={save} disabled={saving || sections.some(s=>!s.dataValid)}>\r\n            {saving ? t(\"admin.customize.saving\") : t(\"admin.customize.saveAll\")}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-center gap-2\">\r\n        {LANGS.map(l=>(\r\n          <button key={l}\r\n            className={`btn ${activeLang===l?\"btn-primary\":\"btn-outline\"} !py-1 !px-3`}\r\n            onClick={()=>setActiveLang(l)}>{l.toUpperCase()}</button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {sorted.map(s=>(\r\n          <div key={s.id} className=\"card p-4\">\r\n            <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"font-semibold uppercase\">[{s.section_key}]</span>\r\n                <input value={s.section_key} onChange={e=>setSections(prev=>prev.map(x=>x.id===s.id?{...x, section_key:e.target.value}:x))}\r\n                  className=\"px-2 py-1 rounded-xl border dark:bg-slate-900\" placeholder=\"section_key\" />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <button className=\"p-2 rounded-xl border hover:bg-slate-50 dark:hover:bg-slate-800\" onClick={()=>move(s.id, -1)} title=\"Naik\"><ArrowUp size={16}/></button>\r\n                <button className=\"p-2 rounded-xl border hover:bg-slate-50 dark:hover:bg-slate-800\" onClick={()=>move(s.id, +1)} title=\"Turun\"><ArrowDown size={16}/></button>\r\n                <label className=\"text-sm\">{t(\"admin.customize.sort\")}</label>\r\n                <input type=\"number\" className=\"w-20 border rounded-xl px-2 py-1 dark:bg-slate-900\" value={s.sort_index}\r\n                  onChange={e=>setSections(prev=>prev.map(x=>x.id===s.id?{...x, sort_index:parseInt(e.target.value)||0}:x))}/>\r\n                <button className=\"p-2 rounded-xl border hover:bg-red-50 dark:hover:bg-slate-800\" onClick={()=>deleteSection(s.id)} title=\"Hapus\"><Trash2 size={16}/></button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid md:grid-cols-2 gap-4 mt-4\">\r\n              {/* Data JSON + uploader */}\r\n              <div>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <label className=\"text-sm\">{t(\"admin.customize.dataJsonLabel\")}</label>\r\n                  <label className=\"inline-flex items-center gap-2 text-xs cursor-pointer\">\r\n                    <Upload size={14}/> Upload Image\r\n                    <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={(e)=>onUpload(s.id, e.target.files?.[0])}/>\r\n                  </label>\r\n                </div>\r\n                <textarea rows=\"14\"\r\n                  className={`w-full border rounded-xl px-3 py-2 dark:bg-slate-900 font-mono text-xs ${s.dataValid?'':'border-red-500'}`}\r\n                  value={s.dataText}\r\n                  onChange={(e)=>updateDataText(s.id, e.target.value)}\r\n                />\r\n                {!s.dataValid && <div className=\"text-xs text-red-600 mt-1\">JSON tidak valid</div>}\r\n              </div>\r\n\r\n              {/* Locales: tab simple */}\r\n              <div className=\"space-y-2\">\r\n                <div className=\"font-medium uppercase\">{activeLang}</div>\r\n                <label className=\"text-sm\">{t(\"admin.customize.titleLabel\")}</label>\r\n                <input className=\"w-full border rounded-xl px-3 py-2 dark:bg-slate-900 mb-2\"\r\n                  value={s.locales[activeLang].title}\r\n                  onChange={(e)=>updateLocal(s.id, activeLang, \"title\", e.target.value)}\r\n                />\r\n                <label className=\"text-sm\">{t(\"admin.customize.bodyLabel\")}</label>\r\n                <textarea rows=\"8\" className=\"w-full border rounded-xl px-3 py-2 dark:bg-slate-900\"\r\n                  value={s.locales[activeLang].body_md}\r\n                  onChange={(e)=>updateLocal(s.id, activeLang, \"body_md\", e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}