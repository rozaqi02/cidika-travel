{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\cidika-travel\\\\src\\\\pages\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Checkout.jsx\nimport React, { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useCart } from \"../context/CartContext\";\nimport { supabase } from \"../lib/supabaseClient.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCurrency } from \"../context/CurrencyContext\";\nimport { formatMoneyFromIDR } from \"../utils/currency\";\nimport { motion } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Checkout() {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const {\n    items,\n    clear\n  } = useCart();\n  const nav = useNavigate();\n  const {\n    fx,\n    currency,\n    locale\n  } = useCurrency();\n  const [form, setForm] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    date: \"\",\n    notes: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n\n  // tanggal \"hari ini\" dalam format YYYY-MM-DD untuk <input type=\"date\">\n  const today = useMemo(() => new Date().toISOString().slice(0, 10), []);\n\n  // helper angka aman\n  const n = (v, f = 0) => {\n    const x = Number(v);\n    return Number.isFinite(x) ? x : f;\n  };\n  const lineSubtotal = it => {\n    const price = n(it.price);\n    const pax = Math.max(1, n(it.pax, 1));\n    const qty = Math.max(1, n(it.qty, 1));\n    return price * pax * qty;\n  };\n  const grandTotal = useMemo(() => items.reduce((s, it) => s + lineSubtotal(it), 0), [items]);\n  const first = items[0] || null;\n  const audience = (first === null || first === void 0 ? void 0 : first.audience) || \"domestic\";\n  const audienceLabel = audience === \"foreign\" ? t(\"checkout.audienceForeign\", {\n    defaultValue: \"Foreign\"\n  }) : t(\"checkout.audienceDomestic\", {\n    defaultValue: \"Domestik\"\n  });\n  const buildWAMessage = summary => {\n    // summary: { public_code, date, items, grandTotal, name, email, phone, audience }\n    const lines = [];\n    lines.push(t(\"checkout.wa.header\", {\n      defaultValue: \"Halo Admin CIDIKA, saya ingin booking.\"\n    }));\n    lines.push(\"\");\n    lines.push(`${t(\"checkout.wa.name\", {\n      defaultValue: \"Nama\"\n    })}: ${summary.name}`);\n    if (summary.phone) lines.push(`${t(\"checkout.wa.phone\", {\n      defaultValue: \"WA\"\n    })}: ${summary.phone}`);\n    if (summary.email) lines.push(`${t(\"checkout.wa.email\", {\n      defaultValue: \"Email\"\n    })}: ${summary.email}`);\n    lines.push(`${t(\"checkout.wa.date\", {\n      defaultValue: \"Tanggal\"\n    })}: ${summary.date}`);\n    lines.push(`${t(\"checkout.wa.audience\", {\n      defaultValue: \"Tipe\"\n    })}: ${summary.audience === \"foreign\" ? \"Foreign\" : \"Domestik\"}`);\n    lines.push(\"\");\n    lines.push(t(\"checkout.wa.items\", {\n      defaultValue: \"Detail Item:\"\n    }));\n    items.forEach(it => {\n      const pax = Math.max(1, n(it.pax, 1));\n      const qty = Math.max(1, n(it.qty, 1));\n      const price = n(it.price);\n      const subtotal = price * pax * qty;\n      const tag = it.audience === \"foreign\" ? \"Foreign\" : \"Domestik\";\n      lines.push(`• ${it.title} (${tag}) — ${pax} ${t(\"home.pax\", {\n        defaultValue: \"pax\"\n      })} × ${qty} = ${formatMoneyFromIDR(subtotal, currency, fx, locale)}`);\n    });\n    lines.push(\"\");\n    lines.push(`${t(\"checkout.wa.total\", {\n      defaultValue: \"Total\"\n    })}: ${formatMoneyFromIDR(summary.grandTotal, currency, fx, locale)}`);\n    if (summary.public_code) lines.push(`${t(\"checkout.wa.code\", {\n      defaultValue: \"Kode\"\n    })}: ${summary.public_code}`);\n    lines.push(\"\");\n    lines.push(t(\"checkout.wa.footer\", {\n      defaultValue: \"Mohon konfirmasinya ya 🙏\"\n    }));\n    return encodeURIComponent(lines.join(\"\\n\"));\n  };\n  const onSubmit = async e => {\n    e.preventDefault();\n    if (!items.length) {\n      setMsg(t(\"checkout.cartEmpty\", {\n        defaultValue: \"Keranjang kosong.\"\n      }));\n      return;\n    }\n    setLoading(true);\n    setMsg(t(\"checkout.creating\", {\n      defaultValue: \"Membuat order...\"\n    }));\n    try {\n      const p_date = form.date || today;\n      const payload = {\n        p_package_id: first.id,\n        p_date,\n        p_pax: Math.max(1, n(first.pax, 1)),\n        p_audience: audience,\n        p_customer_name: form.name,\n        p_email: form.email,\n        p_phone: form.phone,\n        p_notes: form.notes || \"\",\n        // price_idr = harga per pax × pax (per line)\n        p_items: items.map(it => ({\n          item_name: it.title + (it.audience ? ` (${it.audience})` : \"\"),\n          qty: Math.max(1, n(it.qty, 1)),\n          price_idr: n(it.price) * Math.max(1, n(it.pax, 1))\n        }))\n      };\n      const {\n        data,\n        error\n      } = await supabase.rpc(\"place_order_v2\", payload);\n      if (error) throw error;\n      const row = Array.isArray(data) ? data[0] : data;\n      const public_code = (row === null || row === void 0 ? void 0 : row.public_code) || null;\n\n      // siapkan WA message\n      const text = buildWAMessage({\n        public_code,\n        date: p_date,\n        items,\n        grandTotal,\n        name: form.name,\n        email: form.email,\n        phone: form.phone,\n        audience\n      });\n\n      // bersihkan keranjang dulu supaya balik dari WA state-nya bersih\n      clear();\n\n      // redirect ke WhatsApp\n      const wa = `https://wa.me/6289523949667?text=${text}`;\n      setMsg(t(\"checkout.redirecting\", {\n        defaultValue: \"Mengalihkan ke WhatsApp...\"\n      }));\n      window.location.href = wa;\n    } catch (e2) {\n      console.error(e2);\n      setMsg(e2.message || t(\"checkout.failed\", {\n        defaultValue: \"Gagal membuat order\"\n      }));\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4 space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sticky top-16 z-[5] rounded-2xl border border-slate-200/60 dark:border-slate-800/60 backdrop-blur-md px-4 py-3 glass flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"px-2 py-0.5 rounded-full text-[10px] uppercase tracking-wide bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200/60 dark:border-slate-700/60\",\n          children: audienceLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold\",\n          children: t(\"checkout.title\", {\n            defaultValue: \"Checkout\"\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-slate-600 dark:text-slate-300\",\n        children: t(\"checkout.itemsCount\", {\n          defaultValue: \"{{count}} item\",\n          count: items.length\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid lg:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          y: 8\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.25\n        },\n        className: \"lg:col-span-2 card p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold mb-2\",\n          children: t(\"checkout.details\", {\n            defaultValue: \"Detail Pemesan\"\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: onSubmit,\n          className: \"grid sm:grid-cols-2 gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"border rounded-2xl px-3 py-2 dark:bg-slate-900 sm:col-span-2\",\n            placeholder: t(\"checkout.name\", {\n              defaultValue: \"Nama Lengkap\"\n            }),\n            value: form.name,\n            onChange: e => setForm({\n              ...form,\n              name: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"border rounded-2xl px-3 py-2 dark:bg-slate-900\",\n            placeholder: t(\"checkout.email\", {\n              defaultValue: \"Email\"\n            }),\n            type: \"email\",\n            value: form.email,\n            onChange: e => setForm({\n              ...form,\n              email: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"border rounded-2xl px-3 py-2 dark:bg-slate-900\",\n            placeholder: t(\"checkout.phone\", {\n              defaultValue: \"Telepon/WA\"\n            }),\n            value: form.phone,\n            onChange: e => setForm({\n              ...form,\n              phone: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"trip-date\",\n              className: \"text-xs mb-1 text-slate-600 dark:text-slate-300\",\n              children: t(\"checkout.date\", {\n                defaultValue: \"Tanggal Trip (YYYY-MM-DD)\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"trip-date\",\n              type: \"date\",\n              className: \"border rounded-2xl px-3 py-2 dark:bg-slate-900\",\n              value: form.date,\n              onChange: e => setForm({\n                ...form,\n                date: e.target.value\n              }),\n              min: today,\n              \"aria-label\": t(\"checkout.date\", {\n                defaultValue: \"Tanggal Trip (YYYY-MM-DD)\"\n              }),\n              onFocus: () => {\n                // kalau kosong saat fokus, prefill jadi hari ini agar picker konsisten\n                if (!form.date) setForm(f => ({\n                  ...f,\n                  date: today\n                }));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"border rounded-2xl px-3 py-2 dark:bg-slate-900 sm:col-span-2\",\n            placeholder: t(\"checkout.notes\", {\n              defaultValue: \"Catatan\"\n            }),\n            rows: \"4\",\n            value: form.notes,\n            onChange: e => setForm({\n              ...form,\n              notes: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:col-span-2 flex items-center gap-3 mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              disabled: loading,\n              children: loading ? t(\"checkout.processing\", {\n                defaultValue: \"Memproses...\"\n              }) : t(\"checkout.submit\", {\n                defaultValue: \"Buat Pesanan\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), msg && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-slate-500\",\n              children: msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.aside, {\n        initial: {\n          opacity: 0,\n          y: 8\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.25,\n          delay: 0.05\n        },\n        className: \"card p-4 h-max sticky top-[7.5rem]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: [t(\"checkout.summary\", {\n            defaultValue: \"Ringkasan\"\n          }), \" \\u2014 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sky-700 dark:text-sky-300\",\n            children: audienceLabel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), items.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: t(\"checkout.cartEmptyShort\", {\n            defaultValue: \"Keranjang kosong\"\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"space-y-2\",\n            children: items.map(it => {\n              const pax = Math.max(1, n(it.pax, 1));\n              const qty = Math.max(1, n(it.qty, 1));\n              const price = n(it.price);\n              const subtotal = price * pax * qty;\n              const aud = it.audience === \"foreign\" ? \"Foreign\" : \"Domestik\";\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start justify-between gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: it.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 25\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"px-1.5 py-0.5 rounded-full text-[10px] uppercase tracking-wide bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200/60 dark:border-slate-700/60\",\n                    children: aud\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-slate-500 dark:text-slate-400 text-xs\",\n                    children: [pax, \" \", t(\"home.pax\", {\n                      defaultValue: \"pax\"\n                    }), \" \\xD7 \", qty, \" \\u2022 \", formatMoneyFromIDR(price, currency, fx, locale), \"/pax\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: formatMoneyFromIDR(subtotal, currency, fx, locale)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 23\n                }, this)]\n              }, `${it.id}-${pax}-${it.audience || \"domestic\"}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"my-3 border-slate-200 dark:border-slate-800\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between font-semibold\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: t(\"checkout.total\", {\n                defaultValue: \"Total\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatMoneyFromIDR(grandTotal, currency, fx, locale)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2 text-xs text-slate-500 dark:text-slate-400\",\n            children: audience === \"foreign\" ? t(\"checkout.noteForeign\", {\n              defaultValue: \"Termasuk penyesuaian untuk wisatawan mancanegara.\"\n            }) : t(\"checkout.noteDomestic\", {\n              defaultValue: \"Harga khusus wisatawan domestik.\"\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"Fy0Aqiqf9BoWUXjWOK4/jwSrev4=\", false, function () {\n  return [useTranslation, useCart, useNavigate, useCurrency];\n});\n_c = Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useMemo","useState","useTranslation","useCart","supabase","useNavigate","useCurrency","formatMoneyFromIDR","motion","jsxDEV","_jsxDEV","Fragment","_Fragment","Checkout","_s","t","items","clear","nav","fx","currency","locale","form","setForm","name","email","phone","date","notes","loading","setLoading","msg","setMsg","today","Date","toISOString","slice","n","v","f","x","Number","isFinite","lineSubtotal","it","price","pax","Math","max","qty","grandTotal","reduce","s","first","audience","audienceLabel","defaultValue","buildWAMessage","summary","lines","push","forEach","subtotal","tag","title","public_code","encodeURIComponent","join","onSubmit","e","preventDefault","length","p_date","payload","p_package_id","id","p_pax","p_audience","p_customer_name","p_email","p_phone","p_notes","p_items","map","item_name","price_idr","data","error","rpc","row","Array","isArray","text","wa","window","location","href","e2","console","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","count","div","initial","opacity","y","animate","transition","duration","placeholder","value","onChange","target","required","type","htmlFor","min","onFocus","rows","disabled","aside","delay","aud","_c","$RefreshReg$"],"sources":["C:/projects/cidika-travel/src/pages/Checkout.jsx"],"sourcesContent":["// src/pages/Checkout.jsx\r\nimport React, { useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useCart } from \"../context/CartContext\";\r\nimport { supabase } from \"../lib/supabaseClient.js\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useCurrency } from \"../context/CurrencyContext\";\r\nimport { formatMoneyFromIDR } from \"../utils/currency\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function Checkout() {\r\n  const { t } = useTranslation();\r\n  const { items, clear } = useCart();\r\n  const nav = useNavigate();\r\n  const { fx, currency, locale } = useCurrency();\r\n\r\n  const [form, setForm] = useState({ name: \"\", email: \"\", phone: \"\", date: \"\", notes: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  // tanggal \"hari ini\" dalam format YYYY-MM-DD untuk <input type=\"date\">\r\n  const today = useMemo(() => new Date().toISOString().slice(0, 10), []);\r\n\r\n  // helper angka aman\r\n  const n = (v, f = 0) => {\r\n    const x = Number(v);\r\n    return Number.isFinite(x) ? x : f;\r\n  };\r\n\r\n  const lineSubtotal = (it) => {\r\n    const price = n(it.price);\r\n    const pax = Math.max(1, n(it.pax, 1));\r\n    const qty = Math.max(1, n(it.qty, 1));\r\n    return price * pax * qty;\r\n  };\r\n\r\n  const grandTotal = useMemo(() => items.reduce((s, it) => s + lineSubtotal(it), 0), [items]);\r\n\r\n  const first = items[0] || null;\r\n  const audience = first?.audience || \"domestic\";\r\n  const audienceLabel =\r\n    audience === \"foreign\"\r\n      ? t(\"checkout.audienceForeign\", { defaultValue: \"Foreign\" })\r\n      : t(\"checkout.audienceDomestic\", { defaultValue: \"Domestik\" });\r\n\r\n  const buildWAMessage = (summary) => {\r\n    // summary: { public_code, date, items, grandTotal, name, email, phone, audience }\r\n    const lines = [];\r\n    lines.push(t(\"checkout.wa.header\", { defaultValue: \"Halo Admin CIDIKA, saya ingin booking.\" }));\r\n    lines.push(\"\");\r\n    lines.push(`${t(\"checkout.wa.name\", { defaultValue: \"Nama\" })}: ${summary.name}`);\r\n    if (summary.phone) lines.push(`${t(\"checkout.wa.phone\", { defaultValue: \"WA\" })}: ${summary.phone}`);\r\n    if (summary.email) lines.push(`${t(\"checkout.wa.email\", { defaultValue: \"Email\" })}: ${summary.email}`);\r\n    lines.push(`${t(\"checkout.wa.date\", { defaultValue: \"Tanggal\" })}: ${summary.date}`);\r\n    lines.push(\r\n      `${t(\"checkout.wa.audience\", { defaultValue: \"Tipe\" })}: ${\r\n        summary.audience === \"foreign\" ? \"Foreign\" : \"Domestik\"\r\n      }`\r\n    );\r\n    lines.push(\"\");\r\n    lines.push(t(\"checkout.wa.items\", { defaultValue: \"Detail Item:\" }));\r\n    items.forEach((it) => {\r\n      const pax = Math.max(1, n(it.pax, 1));\r\n      const qty = Math.max(1, n(it.qty, 1));\r\n      const price = n(it.price);\r\n      const subtotal = price * pax * qty;\r\n      const tag = it.audience === \"foreign\" ? \"Foreign\" : \"Domestik\";\r\n      lines.push(\r\n        `• ${it.title} (${tag}) — ${pax} ${t(\"home.pax\", { defaultValue: \"pax\" })} × ${qty} = ${formatMoneyFromIDR(\r\n          subtotal,\r\n          currency,\r\n          fx,\r\n          locale\r\n        )}`\r\n      );\r\n    });\r\n    lines.push(\"\");\r\n    lines.push(`${t(\"checkout.wa.total\", { defaultValue: \"Total\" })}: ${formatMoneyFromIDR(summary.grandTotal, currency, fx, locale)}`);\r\n    if (summary.public_code) lines.push(`${t(\"checkout.wa.code\", { defaultValue: \"Kode\" })}: ${summary.public_code}`);\r\n    lines.push(\"\");\r\n    lines.push(t(\"checkout.wa.footer\", { defaultValue: \"Mohon konfirmasinya ya 🙏\" }));\r\n    return encodeURIComponent(lines.join(\"\\n\"));\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!items.length) {\r\n      setMsg(t(\"checkout.cartEmpty\", { defaultValue: \"Keranjang kosong.\" }));\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMsg(t(\"checkout.creating\", { defaultValue: \"Membuat order...\" }));\r\n\r\n    try {\r\n      const p_date = form.date || today;\r\n      const payload = {\r\n        p_package_id: first.id,\r\n        p_date,\r\n        p_pax: Math.max(1, n(first.pax, 1)),\r\n        p_audience: audience,\r\n        p_customer_name: form.name,\r\n        p_email: form.email,\r\n        p_phone: form.phone,\r\n        p_notes: form.notes || \"\",\r\n        // price_idr = harga per pax × pax (per line)\r\n        p_items: items.map((it) => ({\r\n          item_name: it.title + (it.audience ? ` (${it.audience})` : \"\"),\r\n          qty: Math.max(1, n(it.qty, 1)),\r\n          price_idr: n(it.price) * Math.max(1, n(it.pax, 1)),\r\n        })),\r\n      };\r\n\r\n      const { data, error } = await supabase.rpc(\"place_order_v2\", payload);\r\n      if (error) throw error;\r\n\r\n      const row = Array.isArray(data) ? data[0] : data;\r\n      const public_code = row?.public_code || null;\r\n\r\n      // siapkan WA message\r\n      const text = buildWAMessage({\r\n        public_code,\r\n        date: p_date,\r\n        items,\r\n        grandTotal,\r\n        name: form.name,\r\n        email: form.email,\r\n        phone: form.phone,\r\n        audience,\r\n      });\r\n\r\n      // bersihkan keranjang dulu supaya balik dari WA state-nya bersih\r\n      clear();\r\n\r\n      // redirect ke WhatsApp\r\n      const wa = `https://wa.me/6289523949667?text=${text}`;\r\n      setMsg(t(\"checkout.redirecting\", { defaultValue: \"Mengalihkan ke WhatsApp...\" }));\r\n      window.location.href = wa;\r\n    } catch (e2) {\r\n      console.error(e2);\r\n      setMsg(e2.message || t(\"checkout.failed\", { defaultValue: \"Gagal membuat order\" }));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4 space-y-4\">\r\n      {/* HERO / toolbar kecil */}\r\n      <div className=\"sticky top-16 z-[5] rounded-2xl border border-slate-200/60 dark:border-slate-800/60 backdrop-blur-md px-4 py-3 glass flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"px-2 py-0.5 rounded-full text-[10px] uppercase tracking-wide bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200/60 dark:border-slate-700/60\">\r\n            {audienceLabel}\r\n          </span>\r\n          <h1 className=\"text-xl font-bold\">{t(\"checkout.title\", { defaultValue: \"Checkout\" })}</h1>\r\n        </div>\r\n        <div className=\"text-sm text-slate-600 dark:text-slate-300\">\r\n          {t(\"checkout.itemsCount\", { defaultValue: \"{{count}} item\", count: items.length })}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid lg:grid-cols-3 gap-6\">\r\n        {/* FORM */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 8 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.25 }}\r\n          className=\"lg:col-span-2 card p-4\"\r\n        >\r\n          <h2 className=\"font-semibold mb-2\">{t(\"checkout.details\", { defaultValue: \"Detail Pemesan\" })}</h2>\r\n          <form onSubmit={onSubmit} className=\"grid sm:grid-cols-2 gap-3\">\r\n            <input\r\n              className=\"border rounded-2xl px-3 py-2 dark:bg-slate-900 sm:col-span-2\"\r\n              placeholder={t(\"checkout.name\", { defaultValue: \"Nama Lengkap\" })}\r\n              value={form.name}\r\n              onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n              required\r\n            />\r\n            <input\r\n              className=\"border rounded-2xl px-3 py-2 dark:bg-slate-900\"\r\n              placeholder={t(\"checkout.email\", { defaultValue: \"Email\" })}\r\n              type=\"email\"\r\n              value={form.email}\r\n              onChange={(e) => setForm({ ...form, email: e.target.value })}\r\n              required\r\n            />\r\n            <input\r\n              className=\"border rounded-2xl px-3 py-2 dark:bg-slate-900\"\r\n              placeholder={t(\"checkout.phone\", { defaultValue: \"Telepon/WA\" })}\r\n              value={form.phone}\r\n              onChange={(e) => setForm({ ...form, phone: e.target.value })}\r\n            />\r\n\r\n            {/* TRIP DATE — pakai calendar picker native */}\r\n            <div className=\"flex flex-col\">\r\n              <label htmlFor=\"trip-date\" className=\"text-xs mb-1 text-slate-600 dark:text-slate-300\">\r\n                {t(\"checkout.date\", { defaultValue: \"Tanggal Trip (YYYY-MM-DD)\" })}\r\n              </label>\r\n              <input\r\n                id=\"trip-date\"\r\n                type=\"date\"\r\n                className=\"border rounded-2xl px-3 py-2 dark:bg-slate-900\"\r\n                value={form.date}\r\n                onChange={(e) => setForm({ ...form, date: e.target.value })}\r\n                min={today}\r\n                aria-label={t(\"checkout.date\", { defaultValue: \"Tanggal Trip (YYYY-MM-DD)\" })}\r\n                onFocus={() => {\r\n                  // kalau kosong saat fokus, prefill jadi hari ini agar picker konsisten\r\n                  if (!form.date) setForm((f) => ({ ...f, date: today }));\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <textarea\r\n              className=\"border rounded-2xl px-3 py-2 dark:bg-slate-900 sm:col-span-2\"\r\n              placeholder={t(\"checkout.notes\", { defaultValue: \"Catatan\" })}\r\n              rows=\"4\"\r\n              value={form.notes}\r\n              onChange={(e) => setForm({ ...form, notes: e.target.value })}\r\n            />\r\n\r\n            <div className=\"sm:col-span-2 flex items-center gap-3 mt-1\">\r\n              <button className=\"btn btn-primary\" disabled={loading}>\r\n                {loading ? t(\"checkout.processing\", { defaultValue: \"Memproses...\" }) : t(\"checkout.submit\", { defaultValue: \"Buat Pesanan\" })}\r\n              </button>\r\n              {msg && <p className=\"text-sm text-slate-500\">{msg}</p>}\r\n            </div>\r\n          </form>\r\n        </motion.div>\r\n\r\n        {/* RINGKASAN (sticky) */}\r\n        <motion.aside\r\n          initial={{ opacity: 0, y: 8 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.25, delay: 0.05 }}\r\n          className=\"card p-4 h-max sticky top-[7.5rem]\"\r\n        >\r\n          <h3 className=\"font-semibold mb-2\">\r\n            {t(\"checkout.summary\", { defaultValue: \"Ringkasan\" })} — <span className=\"text-sky-700 dark:text-sky-300\">{audienceLabel}</span>\r\n          </h3>\r\n\r\n          {items.length === 0 ? (\r\n            <p className=\"text-slate-500\">{t(\"checkout.cartEmptyShort\", { defaultValue: \"Keranjang kosong\" })}</p>\r\n          ) : (\r\n            <>\r\n              <ul className=\"space-y-2\">\r\n                {items.map((it) => {\r\n                  const pax = Math.max(1, n(it.pax, 1));\r\n                  const qty = Math.max(1, n(it.qty, 1));\r\n                  const price = n(it.price);\r\n                  const subtotal = price * pax * qty;\r\n                  const aud = it.audience === \"foreign\" ? \"Foreign\" : \"Domestik\";\r\n                  return (\r\n                    <li key={`${it.id}-${pax}-${it.audience || \"domestic\"}`} className=\"flex items-start justify-between gap-2\">\r\n                      <span className=\"text-sm\">\r\n                        <span className=\"font-medium\">{it.title}</span>{\" \"}\r\n                        <span className=\"px-1.5 py-0.5 rounded-full text-[10px] uppercase tracking-wide bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200/60 dark:border-slate-700/60\">\r\n                          {aud}\r\n                        </span>\r\n                        <br />\r\n                        <span className=\"text-slate-500 dark:text-slate-400 text-xs\">\r\n                          {pax} {t(\"home.pax\", { defaultValue: \"pax\" })} × {qty} • {formatMoneyFromIDR(price, currency, fx, locale)}/pax\r\n                        </span>\r\n                      </span>\r\n                      <span className=\"font-medium\">{formatMoneyFromIDR(subtotal, currency, fx, locale)}</span>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n\r\n              <hr className=\"my-3 border-slate-200 dark:border-slate-800\" />\r\n              <div className=\"flex items-center justify-between font-semibold\">\r\n                <span>{t(\"checkout.total\", { defaultValue: \"Total\" })}</span>\r\n                <span>{formatMoneyFromIDR(grandTotal, currency, fx, locale)}</span>\r\n              </div>\r\n              <p className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">\r\n                {audience === \"foreign\"\r\n                  ? t(\"checkout.noteForeign\", { defaultValue: \"Termasuk penyesuaian untuk wisatawan mancanegara.\" })\r\n                  : t(\"checkout.noteDomestic\", { defaultValue: \"Harga khusus wisatawan domestik.\" })}\r\n              </p>\r\n            </>\r\n          )}\r\n        </motion.aside>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}