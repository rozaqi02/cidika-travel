{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\cidika-travel\\\\src\\\\context\\\\CurrencyContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport { supabase } from \"../lib/supabaseClient.js\";\nimport { useTranslation } from \"react-i18next\";\nimport { mapLangToCurrency, mapLangToLocale } from \"../utils/currency\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Ctx = /*#__PURE__*/createContext(null);\nexport const useCurrency = () => {\n  _s();\n  return useContext(Ctx);\n};\n_s(useCurrency, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function CurrencyProvider({\n  children\n}) {\n  _s2();\n  const {\n    i18n\n  } = useTranslation();\n  const [fx, setFx] = useState([]);\n  const [currency, setCurrency] = useState(mapLangToCurrency(i18n.language || \"en\"));\n  const [locale, setLocale] = useState(mapLangToLocale(i18n.language || \"en\"));\n  useEffect(() => {\n    (async () => {\n      const {\n        data,\n        error\n      } = await supabase.from(\"fx_rates\").select(\"*\");\n      if (!error) setFx(data || []);\n    })();\n  }, []);\n  useEffect(() => {\n    const lng = i18n.language || \"en\";\n    setCurrency(mapLangToCurrency(lng));\n    setLocale(mapLangToLocale(lng));\n  }, [i18n.language]);\n  const value = useMemo(() => ({\n    fx,\n    currency,\n    setCurrency,\n    locale\n  }), [fx, currency, locale]);\n  return /*#__PURE__*/_jsxDEV(Ctx.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 10\n  }, this);\n}\n_s2(CurrencyProvider, \"O3bNuIGLyLwbYv1BaeWPhcsXmDE=\", false, function () {\n  return [useTranslation];\n});\n_c = CurrencyProvider;\nvar _c;\n$RefreshReg$(_c, \"CurrencyProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useState","supabase","useTranslation","mapLangToCurrency","mapLangToLocale","jsxDEV","_jsxDEV","Ctx","useCurrency","_s","CurrencyProvider","children","_s2","i18n","fx","setFx","currency","setCurrency","language","locale","setLocale","data","error","from","select","lng","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Projects/cidika-travel/src/context/CurrencyContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { supabase } from \"../lib/supabaseClient.js\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { mapLangToCurrency, mapLangToLocale } from \"../utils/currency\";\r\n\r\nconst Ctx = createContext(null);\r\nexport const useCurrency = () => useContext(Ctx);\r\n\r\nexport function CurrencyProvider({ children }) {\r\n  const { i18n } = useTranslation();\r\n  const [fx, setFx] = useState([]);\r\n  const [currency, setCurrency] = useState(mapLangToCurrency(i18n.language || \"en\"));\r\n  const [locale, setLocale] = useState(mapLangToLocale(i18n.language || \"en\"));\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { data, error } = await supabase.from(\"fx_rates\").select(\"*\");\r\n      if (!error) setFx(data || []);\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const lng = i18n.language || \"en\";\r\n    setCurrency(mapLangToCurrency(lng));\r\n    setLocale(mapLangToLocale(lng));\r\n  }, [i18n.language]);\r\n\r\n  const value = useMemo(() => ({ fx, currency, setCurrency, locale }), [fx, currency, locale]);\r\n\r\n  return <Ctx.Provider value={value}>{children}</Ctx.Provider>;\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AACtF,SAASC,QAAQ,QAAQ,0BAA0B;AACnD,SAASC,cAAc,QAAQ,eAAe;AAC9C,SAASC,iBAAiB,EAAEC,eAAe,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvE,MAAMC,GAAG,gBAAGX,aAAa,CAAC,IAAI,CAAC;AAC/B,OAAO,MAAMY,WAAW,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMZ,UAAU,CAACU,GAAG,CAAC;AAAA;AAACE,EAAA,CAApCD,WAAW;AAExB,OAAO,SAASE,gBAAgBA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,GAAA;EAC7C,MAAM;IAAEC;EAAK,CAAC,GAAGX,cAAc,CAAC,CAAC;EACjC,MAAM,CAACY,EAAE,EAAEC,KAAK,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAChC,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAACG,iBAAiB,CAACU,IAAI,CAACK,QAAQ,IAAI,IAAI,CAAC,CAAC;EAClF,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAACI,eAAe,CAACS,IAAI,CAACK,QAAQ,IAAI,IAAI,CAAC,CAAC;EAE5EpB,SAAS,CAAC,MAAM;IACd,CAAC,YAAY;MACX,MAAM;QAAEuB,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMrB,QAAQ,CAACsB,IAAI,CAAC,UAAU,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC;MACnE,IAAI,CAACF,KAAK,EAAEP,KAAK,CAACM,IAAI,IAAI,EAAE,CAAC;IAC/B,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAENvB,SAAS,CAAC,MAAM;IACd,MAAM2B,GAAG,GAAGZ,IAAI,CAACK,QAAQ,IAAI,IAAI;IACjCD,WAAW,CAACd,iBAAiB,CAACsB,GAAG,CAAC,CAAC;IACnCL,SAAS,CAAChB,eAAe,CAACqB,GAAG,CAAC,CAAC;EACjC,CAAC,EAAE,CAACZ,IAAI,CAACK,QAAQ,CAAC,CAAC;EAEnB,MAAMQ,KAAK,GAAG3B,OAAO,CAAC,OAAO;IAAEe,EAAE;IAAEE,QAAQ;IAAEC,WAAW;IAAEE;EAAO,CAAC,CAAC,EAAE,CAACL,EAAE,EAAEE,QAAQ,EAAEG,MAAM,CAAC,CAAC;EAE5F,oBAAOb,OAAA,CAACC,GAAG,CAACoB,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAf,QAAA,EAAEA;EAAQ;IAAAiB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAe,CAAC;AAC9D;AAACnB,GAAA,CAtBeF,gBAAgB;EAAA,QACbR,cAAc;AAAA;AAAA8B,EAAA,GADjBtB,gBAAgB;AAAA,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}